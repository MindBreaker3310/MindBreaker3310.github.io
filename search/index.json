[{"content":" ç­†è¨˜  éƒ¨è½æ ¼è¦ä¸€ç›´å¯«ä¸‹å»æ˜¯ä¸é–“å–®ï¼Œå·¥ä½œä¸€å¿™å›åˆ°å®¶å€’é ­å°±ç¡ï¼Œæ²’æ™‚é–“è·Ÿç²¾ç¥ä¾†è¨˜éŒ„ä¸€ä¸‹\næˆ‘æœ¬äººåŸºæœ¬ä¸Šæ²’æœ‰åœ¨ä½¿ç”¨IGï¼Œä½†å…§å¿ƒä¹Ÿæœ‰ä¸€å€‹è¦ç™¼å»¢æ–‡çš„è¡å‹•\næŠŠé€™é‚Šç•¶IGåœ¨ç”¨ä¾†çš„å¿ƒæ…‹å¯«æ±è¥¿\nè¨˜éŒ„ä¸€ä¸‹Hugoæ“ä½œçš„æŒ‡ä»¤\nå…å¾—ä¸‹æ¬¡åˆè¦å†å»æŸ¥æ€éº¼ç”¨\n HugoæŒ‡ä»¤  æ–°å¢æ–‡ç«  hugo new post/20220928_Blogæ“ä½œæ‰‹å†Š.md é€™æ¨£å°±å¯ä»¥åœ¨content/post/ä¸‹çœ‹åˆ°æ–°å‰µçš„markdownæª”\né–‹å¹¾æœ¬åœ°server hugo server å…ˆåœ¨æœ¬åœ°æ¸¬è©¦é è¦½ç”¨çš„\næ‰“åŒ…æˆéœæ…‹ç¶²é æª” hugo hugo -d ../GitHub/MindBreaker3310.github.io åŸ·è¡Œå®Œå¾Œï¼Œæ‰“åŒ…çš„éœæ…‹ç¶²é æœƒè¼¸å‡ºåœ¨public/è³‡æ–™å¤¾ä¸‹\næˆ–æ˜¯çµ¦ä»–destination flagè¼¸å‡ºåˆ°æŒ‡å®šè³‡æ–™å¤¾\n GitHub Pageç›¸é—œ  æˆ‘é€™é‚Šæ˜¯æ‰“åŒ…æˆéœæ…‹ç¶²é æª”ç›´æ¥è“‹æ‰Github Pageå°æ‡‰åœ¨æœ¬æ©Ÿçš„æª”æ¡ˆ\næ¥è‘—commit pushæ”¶å·¥\n MarkDownç›¸é—œ  \u0026gt;## MarkDownç›¸é—œ\næ®µè½æ¨™é¡Œï¼Œå¦‚ä¸Š\n### æ®µè½å…§çš„å°å€å¡Š\næ®µè½å…§çš„å°å€å¡Š **å°±æ˜¯ç²—é«”** *å°±æ˜¯æ–œé«”*\nå°±æ˜¯ç²—é«” å°±æ˜¯æ–œé«”\n+ åˆ—è¡¨çš„Fu\n åˆ—è¡¨çš„Fu  ![åœ–ç‰‡ä¸‹æ–¹çš„æ–‡å­—](images/åœ–ç‰‡æª”å.jpg)\n\rä¸Šåœ–ç‰‡\r\nå…¶ä»–æœ‰éœ€è¦å†å»æŸ¥å§ https://markdown.tw/\n å¾Œè¨˜  å¸Œæœ›æœªä¾†é‚„èƒ½æŒçºŒæ›´æ–°ï¼ŒGOGO~\n","date":"2022-09-28T14:24:26+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/20220928_blog%E6%93%8D%E4%BD%9C%E6%89%8B%E5%86%8A.md/","title":"Blogæ“ä½œæ‰‹å†Š"},{"content":" å‰è¨€  ä¹‹å‰å¯«äº†é—œæ–¼RabbitMQçš„ç­†è¨˜\nå…¶å¯¦æ˜¯è¨˜éŒ„å¦‚ä½•ä½¿ç”¨masstransitå¥—ä»¶ä¾†å¿«é€Ÿçš„å‚³émessage\né€™å€‹å¥—ä»¶æ”¯æ´çš„åŠŸèƒ½èˆ‡èƒ½å¤ è¨­å®šçš„ç´°ç¯€ç•¶ç„¶æ˜¯æ²’æœ‰åŸç”Ÿä¾†å¾—å¥½\næ‰€ä»¥é‡æ–°å­¸ç¿’ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨å®˜æ–¹çš„å¥—ä»¶\n Hello World!  å¯¦ä½œæœ€ç°¡å–®çš„\nProducerç›´æ¥å°‡Messageä¸Ÿå…¥Queueå†ç”±Consumerè™•ç†å®Œç•¢\n\ræ¶æ§‹åœ–\r\n ç™¼é€ç«¯ç¨‹å¼ç¢¼  class Send { public static void Main() { var factory = new ConnectionFactory() { HostName = \u0026#34;localhost\u0026#34; }; using (var connection = factory.CreateConnection())//é€£ç·šè‡³rabbitmq server  using (var channel = connection.CreateModel())//å»ºç«‹æ¨¡å‹  { //å®£å‘Šqueue(å¦‚æœä¸å­˜åœ¨æ‰æœƒå®£å‘Š)  channel.QueueDeclare(queue: \u0026#34;hello\u0026#34;,//queueåç¨±  durable: false, exclusive: false, autoDelete: false, arguments: null); //è¦å‚³é€çš„è¨Šæ¯  string message = \u0026#34;Hello World!\u0026#34;; var body = Encoding.UTF8.GetBytes(message); //å‚³é€è‡³queue  channel.BasicPublish(exchange: \u0026#34;\u0026#34;, routingKey: \u0026#34;hello\u0026#34;,//queueåç¨±  basicProperties: null, body: body); Console.WriteLine(\u0026#34; [x] Sent {0}\u0026#34;, message); } Console.WriteLine(\u0026#34; Press [enter] to exit.\u0026#34;); Console.ReadLine(); } }  æ¥æ”¶ç«¯ç¨‹å¼ç¢¼  class Receive { public static void Main() { var factory = new ConnectionFactory() { HostName = \u0026#34;localhost\u0026#34; }; using (var connection = factory.CreateConnection()) using (var channel = connection.CreateModel()) { channel.QueueDeclare(queue: \u0026#34;hello\u0026#34;, durable: false, exclusive: false, autoDelete: false, arguments: null); //å»ºç«‹Consumer  var consumer = new EventingBasicConsumer(channel); consumer.Received += (model, ea) =\u0026gt; //ea = EventArgs  { var body = ea.Body.ToArray(); var message = Encoding.UTF8.GetString(body); Console.WriteLine(\u0026#34; [x] Received {0}\u0026#34;, message); }; //å›å‚³Ack  channel.BasicConsume(queue: \u0026#34;hello\u0026#34;, autoAck: true, consumer: consumer); Console.WriteLine(\u0026#34; Press [enter] to exit.\u0026#34;); Console.ReadLine(); } } }  Work queues  ç™¼é€ç«¯åŸºæœ¬ä¸€æ¨£ï¼Œä½†æ˜¯å¯ä»¥æœ‰å¤šå€‹æ¥æ”¶ç«¯ï¼Œé¿å…è¢«å–®ä¸€å€‹Consumerå¡ä½\n\ræ¶æ§‹åœ–\r\n ç™¼é€ç«¯ç¨‹å¼ç¢¼  class NewTask { public static void Main(string[] args) { var factory = new ConnectionFactory() { HostName = \u0026#34;localhost\u0026#34; }; using (var connection = factory.CreateConnection())//é€£ç·šè‡³rabbitmq server  using (var channel = connection.CreateModel())//å»ºç«‹æ¨¡å‹  { //å®£å‘Šqueue(å¦‚æœä¸å­˜åœ¨æ‰æœƒå®£å‘Š)  channel.QueueDeclare(queue: \u0026#34;task-queue\u0026#34;, durable: true,//é‡é–‹RabbitMQä»æœƒå­˜åœ¨  exclusive: false, autoDelete: false, arguments: null); //è¦å‚³é€çš„è¨Šæ¯  var message = GetMessage(args); var body = Encoding.UTF8.GetBytes(message); //å‚³é€è‡³queue  channel.BasicPublish(exchange: \u0026#34;\u0026#34;, routingKey: \u0026#34;task-queue\u0026#34;,//queueåç¨±  basicProperties: null, body: body); Console.WriteLine(\u0026#34; [x] Sent {0}\u0026#34;, message); } Console.WriteLine(\u0026#34; Press [enter] to exit.\u0026#34;); Console.ReadLine(); } private static string GetMessage(string[] args) { //å¦‚æœè¼¸å…¥åƒæ•¸ç‚ºç©ºï¼Œä»£å…¥Hello World!  return args.Length \u0026gt; 0 ? string.Join(\u0026#34; \u0026#34;, args) : \u0026#34;Hello World!\u0026#34;; } } é€™è£¡å®£å‘Šçš„Queue durableæ˜¯trueï¼Œæ‰€ä»¥ç•¶RabbitMQ serveré‡é–‹å¾Œï¼Œä»æœƒå­˜åœ¨ã€‚\n æ¥æ”¶ç«¯ç¨‹å¼ç¢¼  class Worker { public static void Main(string[] args) { var factory = new ConnectionFactory() { HostName = \u0026#34;localhost\u0026#34; }; using (var connection = factory.CreateConnection()) using (var channel = connection.CreateModel()) { channel.QueueDeclare(queue: \u0026#34;task-queue\u0026#34;, durable: true, exclusive: false, autoDelete: false, arguments: null); var consumer = new EventingBasicConsumer(channel); consumer.Received += (model, ea) =\u0026gt; { var body = ea.Body.ToArray(); var message = Encoding.UTF8.GetString(body); Console.WriteLine(\u0026#34; [x] Received {0}\u0026#34;, message); //å¢åŠ å»¶é²  int dots = message.Split(\u0026#39;.\u0026#39;).Length - 1; Thread.Sleep(dots * 1000); Console.WriteLine(\u0026#34; [x] Done\u0026#34;); //è™•ç†ä¸­è¿”å›éŒ¯èª¤è¨Šæ¯  //channel.BasicAck(deliveryTag: ea.DeliveryTag, multiple: false);  }; //å‘Šå…¥rabbitMQ å·²ç¶“è™•ç†å®Œç•¢ï¼Œå¯ä»¥é‡‹æ”¾ç©ºé–“ã€‚  channel.BasicConsume(queue: \u0026#34;hello\u0026#34;, autoAck: true, consumer: consumer); //éŒ¯èª¤çš„è©±  //channel.BasicConsume(queue: \u0026#34;hello\u0026#34;,  // autoAck: false,  // consumer: consumer);  Console.WriteLine(\u0026#34; Press [enter] to exit.\u0026#34;); Console.ReadLine(); } } }  åƒè€ƒ  ","date":"2022-07-06T15:04:29+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/20220706_rabbitmq%E9%87%8D%E6%96%B0%E7%90%86%E8%A7%A3.md/","title":"RabbitMQé‡æ–°ç†è§£"},{"content":" ç­†è¨˜  è¨˜éŒ„ä¸€ä¸‹é€™å€‹ç‰¹åˆ¥çš„controllerå¯«æ³•\né€šé€šéƒ½åªæœ‰ä¸€å€‹å…¥å£ï¼Œå‚³å…¥åŠ å¯†çš„é›»æ–‡ï¼Œè§£æé›»æ–‡å¾Œ\næœƒå¾—çŸ¥è¦åŸ·è¡Œçš„classåç¨±èˆ‡DLLåç¨±\nç”±åç¨±å­—ä¸²åˆ°åŸ·è¡ŒåŠŸèƒ½çš„æ­¥é©Ÿ\nä¾†åšåˆ°å‹•æ…‹çš„å‘¼å«çš„æ–¹æ³•\nä½¿ç”¨åå°„\nä¸å›‰èªª ç›´æ¥çœ‹ç¨‹å¼\n//xxxService å°ˆæ¡ˆåç¨± //xxxFolder è³‡æ–™å¤¾åç¨± //xxxClass åç¨± //\u0026#34;xxxClassçš„ä½ç½®, DLLåç¨±(é€šå¸¸æ˜¯å°ˆæ¡ˆåç¨±)\u0026#34; string targetFile = \u0026#34;xxxService.xxxFolder.xxxClass, xxxService\u0026#34;; //æ–¹æ³•åç¨± string targetMethod = \u0026#34;DoSomething\u0026#34;; //å‚³å…¥åƒæ•¸ Object[] args = [{xxxInputObject}]; //è®€å–dll Type dll = Type.GetType(target); //å¯¦ä½œdll Object InstanceObj = dll.InvokeMember(null, BindingFlags.DeclaredOnly | //invokeAtträ¸€å€‹æˆ–å¤šå€‹BindingFlagsçµ„æˆï¼ŒæœƒæŒ‡å®šåŸ·è¡Œæœå°‹çš„æ–¹å¼  BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.CreateInstance, null, null, null); //åŸ·è¡Œå¯¦ä½œç‰©ä»¶çš„æ–¹æ³• Object result = dll.InvokeMember(targetMethod,//è¦å‘¼å«çš„å±¬æ€§æˆ–æ–¹æ³•åç¨±  BindingFlags.InvokeMethod, //invokeåƒæ•¸  null, InstanceObj, //è¦åŸ·è¡Œçš„obj  args); //å‚³å…¥çš„åƒæ•¸  //å›å‚³åŸ·è¡Œçµæœ return result;  åƒè€ƒ  https://www.dotblogs.com.tw/joysdw12/2012/09/13/74761\n","date":"2022-06-29T10:48:46+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/20220629_c#%E5%8F%8D%E5%B0%84%E6%96%B9%E6%B3%95%E7%B4%80%E9%8C%84.md/","title":"C#åå°„æ–¹æ³•ç´€éŒ„"},{"content":" ç­†è¨˜  é‚„ä¸æœƒåœ¨dcokerå…§é€émongo express(GUIå·¥å…·)åŒæ™‚é€£ç·šå¤šå€‹MongoDBï¼Œåªèƒ½å…ˆç”¨æŒ‡ä»¤å…ˆæ“‹è‘—äº†ã€‚\nå¸¸ç”¨æŸ¥çœ‹è³‡æ–™å…§å®¹çš„æ–¹æ³•å¤§è‡´å¦‚ä¸‹\nå…¶ä»–ç”¨åœ¨å†çœ‹æ–‡æª”å°±å¥½\n//ä½¿ç”¨mongo cli mongo //é¡¯ç¤ºè³‡æ–™åº« show dbs //ä½¿ç”¨è³‡æ–™åº«(myDbç‚ºä¾‹) use myDb //è®€å–è³‡æ–™ db.myCollection.find() db.myCollection.find().pretty() db.get(\u0026#39;myCollection\u0026#39;).find() db.get(\u0026#39;myCollection\u0026#39;).find().pretty() //æœ‰æ¢ä»¶çš„è®€å– db.myCollection.find({æ¢ä»¶}, {æ¬„ä½}) db.myCollection.find({name: \u0026#39;Max\u0026#39;}, {name : 1, age : 1}) db.myCollection.find({name: \u0026#39;Max\u0026#39;}, {name : 1, age : 1, height : 1}) // \u0026gt;18æ­² db.myCollection.find({age: {$gt : 18} }, {name : 1, age : 1}) // \u0026gt;=18æ­² db.myCollection.find({age: {$gte : 18} }, {name : 1, age : 1}) // \u0026lt;18æ­² db.myCollection.find({age: {$lt : 18} }, {name : 1, age : 1}) // \u0026lt;=18æ­² db.myCollection.find({age: {$lte : 18} }, {name : 1, age : 1})  åƒè€ƒ  https://www.mongodb.com/docs/v4.4/crud/\nhttps://www.runoob.com/mongodb/mongodb-operators.html\n","date":"2022-06-27T14:07:21+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/20220627_mongodb_cli%E6%93%8D%E4%BD%9C.md/","title":"MongoDb Cli è®€å–è³‡æ–™"},{"content":" ç­†è¨˜  è€é—†æœ€è¿‘å¸Œæœ›è®“æˆ‘å»é–‹ç™¼èˆ‡è¨­è¨ˆä¸€å€‹ç®¡ç†å…¬å¸å…§éƒ¨åˆç´„èˆ‡å…¬æ–‡çš„æª”ç®¡ç³»çµ±\nä»¥å‰åœ¨å­¸æ ¡å­¸ç¿’çš„å·²ç¶“é‚„çµ¦è€å¸«å•¦XD\nè¶é€™å€‹æ©Ÿæœƒè¤‡ç¿’ä¸€ä¸‹\nä¸€å€‹ç³»çµ±é–‹ç™¼ä¸åªåŒ…å«äº†codingä¹ŸåŒæ™‚æœ‰è¨­è¨ˆã€å“ç®¡ã€é ç®—ã€æ¸¬è©¦ã€å¯«æ–‡ä»¶ã€ä¸Šç·šèˆ‡ç¶­è­·\nå¸¸ç”¨çš„é–‹ç™¼æµç¨‹åˆ†ç‚ºWaterfallèˆ‡Agile\n Waterfall  Waterfallæœ€é©åˆå¹¾ä¹ç¢ºå®šéœ€æ±‚ä¸”é–‹ç™¼ä¸­ä¸æœƒæœ‰å¤ªå¤šè®Šå‹•\nä¸»è¦å¯ä»¥åˆ†ç‚ºäº”å€‹æ­¥é©Ÿ\n æ”¶é›†èˆ‡åˆ†æéœ€æ±‚ æ±ºå®šç³»çµ±æ¶æ§‹ å¯¦ä½œ é©—è­‰ ç¶­è­·   æ”¶é›†èˆ‡åˆ†æéœ€æ±‚ èˆ‡åˆ©ç›Šç›¸é—œè€…ä¿æŒè·é›¢ä¸¦å¾¹åº•ç´€éŒ„éœ€æ±‚\nä¸‹é¢å·²å»ºç«‹note appç‚ºä¾‹\nå¯ä»¥ä½¿ç”¨â€œå¿…é ˆâ€ä¾†æ¢åˆ—å¼éœ€æ±‚\n  åŠŸèƒ½éœ€æ±‚ï¼š\n APPå¿…é ˆå¯ä»¥è¨˜éŒ„æ–‡å­—ï¼Œä¹Ÿå¯ä»¥æ’å…¥åœ–ç‰‡æˆ–æ‰‹å¯«å¡—é´‰ã€‚ éƒ¨åˆ†ç­†è¨˜å…§å®¹å¿…é ˆè¨­å®šå¯†ç¢¼ï¼Œé¿å…è¢«åˆ¥äººçœ‹è¦‹ã€‚ ç­†è¨˜å…§å®¹å¿…é ˆå¯ä»¥è‡ªå‹•åŒæ­¥åˆ°é›²ç«¯ç¡¬ç¢Ÿä¸Šã€‚    éåŠŸèƒ½æ€§éœ€æ±‚ï¼š\n å¿…é ˆæ”¯æ´ios10æˆ–æ›´æ–°ç‰ˆ å¿…é ˆæ¸›å°‘ä¸å¿…è¦çš„è³‡æ–™å‚³è¼¸ï¼Œä»¥é™ä½ä¼ºæœå™¨çš„è² æ“”    å¾åŠŸèƒ½éœ€æ±‚æˆ‘å€‘å¯ä»¥åˆ†æå‡ºä¸‰å€‹æƒ…å¢ƒ(epic)\n ç­†è¨˜çš„å»ºç«‹èˆ‡ç·¨è¼¯ éš±ç§å•é¡Œ é›²ç«¯åŒæ­¥    æƒ…å¢ƒ1ï¼šç­†è¨˜å»ºç«‹èˆ‡ç·¨è¼¯\n èº«ç‚ºä¸€å€‹userï¼Œæˆ‘è¦å¯ä»¥å¿«é€Ÿè¨˜ä¸‹ç­†è¨˜ã€‚ èº«ç‚ºä¸€å€‹userï¼Œæˆ‘è¦èƒ½æŠŠåœ–ç‰‡ä»¥é™„ä»¶çš„æ–¹å¼é™„ä¸Šï¼Œé¿å…å½±éŸ¿åˆ°ç­†è¨˜çš„æ’ç‰ˆã€‚ èº«ç‚ºä¸€å€‹userï¼Œæˆ‘è¦æœ‰æ‰‹å¯«åŠŸèƒ½ï¼Œè®“æˆ‘çš„ç­†è¨˜æ›´æœ‰æº«åº¦ã€‚    æƒ…å¢ƒ2ï¼šéš±ç§\n èº«ç‚ºä¸€å€‹userï¼Œæˆ‘è¦å»ºç«‹éš±ç§ç­†è¨˜ï¼Œåªæœ‰æˆ‘èƒ½å­˜å–å®ƒã€‚ èº«ç‚ºä¸€å€‹userï¼Œæˆ‘è¦ç”¨å¯†ç¢¼ä¿è­·æˆ‘çš„éš±ç§ç­†è¨˜ã€‚    æƒ…å¢ƒ3ï¼šé›²ç«¯åŒæ­¥\n èº«ç‚ºä¸€å€‹userï¼Œæˆ‘è¦æ‰“é–‹appæ™‚ï¼Œè³‡æ–™å°±å·²ç¶“åŒæ­¥æˆæœ€æ–°ç‰ˆã€‚ èº«ç‚ºä¸€å€‹userï¼Œæˆ‘è¦èƒ½å¤ è‡ªå‹•åŒæ­¥åˆ°é›²ç«¯ç¡¬ç¢Ÿä¸Šï¼Œéš¨æ™‚å‚™ä»½ä¸æ€•è³‡æ–™ä¸è¦‹ã€‚    ä¾ç…§æƒ…å¢ƒç•«å‡ºUse Casesåœ–\n\rç­†è¨˜å»ºç«‹èˆ‡ç·¨è¼¯\r\n\réš±ç§\r\n\ré›²ç«¯åŒæ­¥\r\nç•«å‡ºclassä¹‹é–“çš„é—œè¯åœ–\nç•«å‡ºæµç¨‹åœ–\n æ±ºå®šç³»çµ±æ¶æ§‹ é€™å€‹æ­¥é©Ÿå°±åƒæ˜¯å»ºç¯‰çš„è—åœ–ä¸€æ¨£ï¼Œè¨­è¨ˆå¿…é ˆæ¸…æ™°æ˜ç­\n è¦ç”¨ä»€éº¼package/componentsï¼Ÿ æ¯å€‹componentçš„typeæ˜¯ä»€éº¼ï¼Ÿ é€™äº›typeæ€éº¼äº’å‹•æˆ–é”æˆåŠŸèƒ½æ‰€éœ€ æˆ‘å€‘çš„ç³»çµ±å®‰å…¨å—ï¼Ÿ æ•ˆèƒ½å¦‚ä½•ï¼Ÿ å¦‚ä½•è™•ç†éŒ¯èª¤ï¼Ÿ æˆ‘å€‘çš„ç³»çµ±ç©©å›ºå—ï¼Ÿ ä¹‹å¾Œæœƒä¸æœƒæ“´å±•ï¼Ÿ ä½¿ç”¨å“ªäº›ç¬¬ä¸‰æ–¹å¥—ä»¶ï¼Ÿ   å¯¦ä½œï¼†æ¸¬è©¦ å°±æ˜¯å¯¦ä½œï¼Œç™¼èˆ‡æ¸¬è©¦ï¼Œå¹³å¸¸åœ¨åšçš„ã€‚\näº¤çµ¦Useræ¸¬è©¦åŠŸèƒ½æ€§ã€å®‰å…¨æ€§ã€æ•ˆèƒ½ã€å¯¦ç”¨æ€§\né€™å…©å€‹æ­¥é©Ÿæœƒä¸€ç›´é‡è¤‡åˆ°æ²’æœ‰bug\n ç¶­è­· åœ¨é€™å€‹éšæ®µå°±æ˜¯æŠ“æŠ“å°èŸ²\nå°å¹…åº¦å¼·åŒ–åŠŸèƒ½\n Agile  æ•æ·é–‹ç™¼æ˜¯ç‚ºäº†å› æ‡‰éœ€æ±‚ä¸€ç›´è®Šå‹•ï¼Œæ²’è¾¦æ³•å†é–‹ç™¼ä¹‹å‰å°±çŸ¥é“æœ€çµ‚çš„ç”¢å“æœƒæ˜¯é•·ä»€éº¼æ¨£å­ï¼Œé€éä¸æ–·é‡è¤‡çš„é€±æœŸ(Sprint)å¾ªç’°ï¼Œæ¯æ¬¡éƒ½ä¸€é»é»æ”¶é›†åˆ†æè³‡æ–™ã€è¨­è¨ˆã€å¯¦ä½œã€æ¸¬è©¦ï¼Œæ¯ä¸€å€‹å¾ªç’°å°±åƒå°ç€‘å¸ƒä¸€æ¨£ã€‚\nå¸¸è½åˆ°çš„Scrumå°±æ˜¯ä¸€ç¨®å¯¦ä½œAgileçš„æ–¹å¼\n","date":"2022-01-26T13:31:49+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/20220126%E5%AD%B8%E7%BF%92uml.md/","title":"å­¸ç¿’UML"},{"content":" ç­†è¨˜  Api Gatewayçš„è¨­è¨ˆæœ‰å¥½å¹¾ç¨®ï¼Œé€šå¸¸ä¾†èªªä¸€èˆ¬åªç”¨ä¸€å€‹Api Gwä¾†ç•¶ä¸€å€‹å…¥å£ä¸¦ä¸æ˜¯å€‹å¥½ä¸»æ„ï¼Œå¯ä»¥è¨­è¨ˆæˆSPAç¶²é ç”¨ä¸€å€‹ã€æ‰‹æ©ŸAppç”¨ä¸€å€‹ã€å‚³çµ±ç¶²ç«™ç”¨ä¸€å€‹ã€‚\né€™é‚Šä½¿ç”¨çš„Api Gwæ˜¯Ocelot\nOcelotæ˜¯ä¸€å€‹è¼•é‡åŒ–ã€å®¹æ˜“æ“´å……ã€é–‹æºçš„å°ˆæ¡ˆğŸ‘\n å‰ç½®ä½œæ¥­  é–‹å•Ÿæ–°å°ˆæ¡ˆ \u0026raquo; Empty .Net Project\nNuGetå®‰è£å¿…è¦å¥—ä»¶Ocelot\nå¦‚æœè¦ä½¿ç”¨å¿«å–åŠŸèƒ½çš„è©±ï¼Œé‚„è¦å®‰è£Ocelot.Cache.CacheManager\n è¨»å†Šèˆ‡ä½¿ç”¨Ocelotæœå‹™ è¦ä½¿ç”¨å¿«å–åŠŸèƒ½æ‰è¦åŠ ä¸ŠAddCacheManager\npublic void ConfigureServices(IServiceCollection services) { services.AddOcelot() .AddCacheManager(settings =\u0026gt; settings.WithDictionaryHandle()); } public async void Configure(IApplicationBuilder app, IWebHostEnvironment env) { //å‰ç•¥...  await app.UseOcelot(); }  å»ºç«‹é–˜é“è·¯ç”±jsonæª”æ¡ˆ å»ºç«‹ä¸€å€‹é¡ä¼¼appsettings.jsonä¾ç…§ç’°å¢ƒæ˜¯Developmenté‚„æ˜¯Debugä¾†è¦†å¯«çš„æª”æ¡ˆ\n celot.json(ç¶­æŒç©ºçš„)  ocelot.Development.json ocelot.Local.json(æœ¬åœ°æ¸¬è©¦)    ä¾ç…§å‘½åVSæœƒè‡ªå‹•åˆä½µ\nå°ˆæ¡ˆçš„ç’°å¢ƒè®Šæ•¸ASPNETCORE_ENVIRONMENTè¦è¨­å®šæˆLocal\n è¨­å®šProgram.cs public static IHostBuilder CreateHostBuilder(string[] args) =\u0026gt; Host.CreateDefaultBuilder(args) .ConfigureAppConfiguration((hostingContext, config) =\u0026gt; { //æœƒä¾ç…§ASPNETCORE_ENVIRONMENTä¾†è®€å–ä¸åŒçš„æª”æ¡ˆ  config.AddJsonFile($\u0026#34;Ocelot.{hostingContext.HostingEnvironment.EnvironmentName}.json\u0026#34;, true, true); }) .ConfigureWebHostDefaults(webBuilder =\u0026gt; { webBuilder.UseStartup\u0026lt;Startup\u0026gt;(); }) .ConfigureLogging((hostBuilderContext, loggingBuilder) =\u0026gt; { loggingBuilder.AddConfiguration(hostBuilderContext.Configuration.GetSection(\u0026#34;Logging\u0026#34;)); loggingBuilder.AddConsole(); loggingBuilder.AddDebug(); });  è¨­å®šé–˜é“è·¯ç”±  åœ¨é€™é‚Šè¨­å®šé€£è¿‘ä¾†èˆ‡é€£å‡ºå»çš„ä½ç½®ï¼Œé‚„å¯ä»¥åŠ ä¸Šé¡å¤–è¨­å®šï¼ŒFileCacheOptions(æª”æ¡ˆå¿«å–)ã€RateLimitOptions(æµé‡ç®¡æ§)ç­‰ç­‰\u0026hellip;\n{ \u0026#34;Routes\u0026#34;: [ //Catalog API  { \u0026#34;DownstreamPathTemplate\u0026#34;: \u0026#34;/api/v1/Catalog\u0026#34;,//è¦é€£æ¥åˆ°çš„apiè·¯ç”±  \u0026#34;DownstreamScheme\u0026#34;: \u0026#34;http\u0026#34;, \u0026#34;DownstreamHostAndPorts\u0026#34;: [//è¦é€£åˆ°çš„serverä½ç½®  { \u0026#34;Host\u0026#34;: \u0026#34;localhost\u0026#34;, \u0026#34;Port\u0026#34;: \u0026#34;8000\u0026#34; } ], \u0026#34;UpstreamPathTemplate\u0026#34;: \u0026#34;/Catalog\u0026#34;,//å¤–é¢é€£åˆ°é–˜é“çš„è·¯ç”±  \u0026#34;UpstreamHttpMethod\u0026#34;: [ \u0026#34;GET\u0026#34;, \u0026#34;POST\u0026#34;, \u0026#34;PUT\u0026#34; ],//å…è¨±çš„æ–¹æ³•  \u0026#34;FileCacheOptions\u0026#34;: { \u0026#34;TtlSeconds\u0026#34;: 30 }//æª”æ¡ˆå¿«å–é¸é …:è¨­å®šå­˜æ´»æ™‚é–“  }, { \u0026#34;DownstreamPathTemplate\u0026#34;: \u0026#34;/api/v1/Catalog/{id}\u0026#34;, \u0026#34;DownstreamScheme\u0026#34;: \u0026#34;http\u0026#34;, \u0026#34;DownstreamHostAndPorts\u0026#34;: [ { \u0026#34;Host\u0026#34;: \u0026#34;localhost\u0026#34;, \u0026#34;Port\u0026#34;: \u0026#34;8000\u0026#34; } ], \u0026#34;UpstreamPathTemplate\u0026#34;: \u0026#34;/Catalog/{id}\u0026#34;, \u0026#34;UpstreamHttpMethod\u0026#34;: [ \u0026#34;GET\u0026#34;, \u0026#34;DELETE\u0026#34; ] }, //Basket API  { \u0026#34;DownstreamPathTemplate\u0026#34;: \u0026#34;/api/v1/Basket/Checkout\u0026#34;, \u0026#34;DownstreamScheme\u0026#34;: \u0026#34;http\u0026#34;, \u0026#34;DownstreamHostAndPorts\u0026#34;: [ { \u0026#34;Host\u0026#34;: \u0026#34;localhost\u0026#34;, \u0026#34;Port\u0026#34;: \u0026#34;8001\u0026#34; } ], \u0026#34;UpstreamPathTemplate\u0026#34;: \u0026#34;/Basket/Checkout\u0026#34;, \u0026#34;UpstreamHttpMethod\u0026#34;: [ \u0026#34;POST\u0026#34; ], \u0026#34;RateLimitOptions\u0026#34;: { //é™åˆ¶è«‹æ±‚é‡3ç§’å…§åªæœ‰ç¬¬ä¸€ç­†æœƒè¢«æ¥å—  \u0026#34;ClientWhitelist\u0026#34;: [], \u0026#34;EnableRateLimiting\u0026#34;: true, \u0026#34;Period\u0026#34;: \u0026#34;3s\u0026#34;, \u0026#34;PeriodTimespan\u0026#34;: 1, \u0026#34;Limit\u0026#34;: 1 } ], \u0026#34;GlobalConfiguration\u0026#34;: { \u0026#34;BaseUrl\u0026#34;: \u0026#34;http://localhost:5010\u0026#34; } }  Gateway Aggregation èšåˆæ¨¡å¼  \r\næ¦‚å¿µå¦‚åœ–æ‰€ç¤ºï¼ŒåŸæœ¬ä¸€å€‹åŠ å…¥è³¼ç‰©è»Šçš„æ´»å‹•å¯èƒ½éœ€è¦ç”¨åˆ°Catalog.APIèˆ‡Basket.APIï¼Œéœ€è¦ç¶“éé–˜é“å»å¤šæ¬¡å‘¼å«ç‰¹å®šAPI\nèšåˆæ¨¡å¼ä¸‹å°±æ˜¯æä¾›ä¸€å€‹APIï¼Œé€™å€‹APIæœƒå†å»å‘¼å«å…¶ä»–å¤šå€‹API\n è¨­å®šåŸºç¤æœå‹™ å»ºç«‹æ–°å°ˆæ¡ˆå¾Œ åœ¨appsettingsåŠ å…¥è¦é€£ç·šçš„Url\n\u0026#34;ApiSettings\u0026#34;: { \u0026#34;CatalogUrl\u0026#34;: \u0026#34;http://localhost:8001\u0026#34;, \u0026#34;BasketUrl\u0026#34;: \u0026#34;http://localhost:8002\u0026#34;, \u0026#34;OrderingUrl\u0026#34;: \u0026#34;http://localhost:8003\u0026#34; } åœ¨Startupè¨­å®šHttpClientæœå‹™\npublic void ConfigureServices(IServiceCollection services) { services.AddHttpClient\u0026lt;ICatalogService, CatalogService\u0026gt;(c =\u0026gt; c.BaseAddress = new Uri(Configuration[\u0026#34;ApiSettings:CatalogUrl\u0026#34;])); services.AddHttpClient\u0026lt;IBasketService, BasketService\u0026gt;(c =\u0026gt; c.BaseAddress = new Uri(Configuration[\u0026#34;ApiSettings:BasketUrl\u0026#34;])); services.AddHttpClient\u0026lt;IOrderService, OrderService\u0026gt;(c =\u0026gt; c.BaseAddress = new Uri(Configuration[\u0026#34;ApiSettings:OrderingUrl\u0026#34;])); }  å»ºç«‹è¦å‘¼å«å¾Œç«¯APIè¼¸å…¥æˆ–è¼¸å‡ºçš„model public class OrderResponseModel { public string UserName { get; set; } public decimal TotalPrice { get; set; } // BillingAddress  public string FirstName { get; set; } public string LastName { get; set; } public string EmailAddress { get; set; } public string AddressLine { get; set; } public string Country { get; set; } public string State { get; set; } public string ZipCode { get; set; } // Payment  public string CardName { get; set; } public string CardNumber { get; set; } public string Expiration { get; set; } public string CVV { get; set; } public int PaymentMethod { get; set; } }  å»ºç«‹å¾Œç«¯Service public class OrderService : IOrderService { private readonly HttpClient _client; public OrderService(HttpClient client) { _client = client; } public async Task\u0026lt;IEnumerable\u0026lt;OrderResponseModel\u0026gt;\u0026gt; GetOrdersByUserName(string userName) { var response = await _client.GetAsync($\u0026#34;api/v1/Order/{userName}\u0026#34;); var dataAsString = await response.Content.ReadAsStringAsync().ConfigureAwait(false); return JsonSerializer.Deserialize\u0026lt;List\u0026lt;OrderResponseModel\u0026gt;\u0026gt;(dataAsString, new JsonSerializerOptions { PropertyNameCaseInsensitive = true }); } }  å»ºç«‹Controller controlooerè¢«å‘¼å«æ™‚ï¼Œæœƒå»å‘¼å«basketServiceã€catalogServiceèˆ‡orderService\n[HttpGet(\u0026#34;{userName}\u0026#34;, Name = \u0026#34;GetShopping\u0026#34;)] [ProducesResponseType(typeof(ShoppingModel), (int)HttpStatusCode.OK)] public async Task\u0026lt;ActionResult\u0026lt;ShoppingModel\u0026gt;\u0026gt; GetShopping(string userName) { var basket = await _basketService.GetBasket(userName); foreach (var item in basket.Items) { var product = await _catalogService.GetProductById(item.ProductId); item.ProductName = product.Name; item.Category = product.Category; item.Summary = product.Summary; item.Description = product.Description; item.ImageFile = product.ImageFile; } var orders = await _orderService.GetOrdersByUserName(userName); var shoppingModel = new ShoppingModel() { UserName = userName, BasketWithProduct = basket, Orders = orders }; return Ok(shoppingModel); }  æœ€å¾Œåœ¨åŸæœ¬çš„ocelotGatewayçš„josnæª”è£¡é¢è¨­å®šé€™å€‹apiçš„ä½ç½®å°±å¥½äº†\n","date":"2022-01-14T13:20:59+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/20220114_apigateway%E7%AD%86%E8%A8%98.md/","title":"APIGatewayç­†è¨˜"},{"content":" å‰ç½®ä½œæ¥­  RabbitMQçš„å…”å…”iconæ€ªå¯æ„›çš„ï¼Œå¯ä»¥æƒ³åƒæˆéƒµå±€ï¼Œå¯ä»¥æ”¶ä¿¡ä¹Ÿå¯ä»¥é€ä¿¡ï¼Œæ˜¯ä¸€å †å…”å…”å¹«ä½ é€ä¿¡~ğŸ°\n å®‰è£Docker é€édocker-composeä¾†è¨­å®šä¸‹è¼‰ï¼Œalpineæ˜¯è¼•é‡åŒ–é«”ç©è¼ƒå°çš„ç‰ˆæœ¬\n#docker-compose.ymlabbitmq:image:rabbitmq:3-management-alpine#docker-compose.override.ymlrabbitmq:container_name:rabbitmqrestart:alwaysports:- \u0026#34;5672:5672\u0026#34;- \u0026#34;15672:15672\u0026#34;#DashBoardçš„portdocker upä¸Šå»å¾Œï¼Œæ¸¬è©¦çœ‹çœ‹èƒ½ä¸èƒ½é€£ç·šåˆ°localhost:15672ï¼Œå¯ä»¥å°±æœƒé€²åˆ°ç™»å…¥ç•«é¢ï¼Œç¬¬ä¸€æ¬¡ç›´æ¥ç™»å…¥å¸³å¯†éƒ½æ˜¯guestã€‚\n MassTransitğŸš é›†é«”æ­è»Šå»RabbitMQçš„æ¦‚å¿µ(?)ï¼Œé€™æ˜¯å°ˆçµ¦.Netç”¨çš„å¥—ä»¶ï¼Œè®“æˆ‘å€‘æ›´ç°¡å–®çš„å»ä½¿ç”¨RabbitMQçš„åŠŸèƒ½\n å»ºç«‹Eventè£½é€ æ©Ÿ  å»ºç«‹EventBus.Messagesé …ç›®å°ˆæ¡ˆ\nå®‰è£å¿…è¦å¥—ä»¶\n\u0026lt;PackageReference Include=\u0026#34;MassTransit\u0026#34; Version=\u0026#34;7.1.6\u0026#34; /\u0026gt; \u0026lt;PackageReference Include=\u0026#34;MassTransit.AspNetCore\u0026#34; Version=\u0026#34;7.1.6\u0026#34; /\u0026gt; \u0026lt;PackageReference Include=\u0026#34;MassTransit.RabbitMQ\u0026#34; Version=\u0026#34;7.1.6\u0026#34; /\u0026gt; å»ºç«‹Base Eventæœ‰IDèˆ‡å»ºæ§‹æ—¥æœŸï¼Œè®“å…¶ä»–Eventå»ç¹¼æ‰¿å®ƒã€‚\npublic class IntegrationBaseEvent { public IntegrationBaseEvent() { Id = Guid.NewGuid(); CreationDate = DateTime.UtcNow; } public IntegrationBaseEvent(Guid id, DateTime createDate) { Id = id; CreationDate = createDate; } public Guid Id { get; private set; } public DateTime CreationDate { get; private set; } } å»ºç«‹çµå¸³Event\npublic class BasketCheckoutEvent : IntegrationBaseEvent { public string UserName { get; set; } public decimal TotalPrice { get; set; } // BillingAddress  public string FirstName { get; set; } public string LastName { get; set; } public string EmailAddress { get; set; } public string AddressLine { get; set; } public string Country { get; set; } public string State { get; set; } public string ZipCode { get; set; } // Payment  public string CardName { get; set; } public string CardNumber { get; set; } public string Expiration { get; set; } public string CVV { get; set; } public int PaymentMethod { get; set; } } å»ºç«‹Common/EventBusConstants\nè¨­å®šQueueçš„åå­\npublic class EventBusConstants { public const string BasketCheckoutQueue = \u0026#34;basketcheckout-queue\u0026#34;; }  Eventç™¼é€ç«¯  å»ºç«‹å¥½EventBus.Messageså¾Œå°±å¯ä»¥é–‹å§‹ä¾†è©¦è‘—ç™¼é€Eventå‡ºå»\nè¨­å®šDependenciesæ·»åŠ EventBus.Messages\nå®‰è£å¿…è¦å¥—ä»¶ä¸‰ä»¶çµ„å¾Œï¼Œåœ¨startupè£¡è¨»å†ŠMassTransitå¿…è¦æœå‹™ï¼Œä¸¦è¨­å®šä½¿ç”¨RabbitMq!\n\u0026lt;PackageReference Include=\u0026#34;MassTransit\u0026#34; Version=\u0026#34;7.1.6\u0026#34; /\u0026gt; \u0026lt;PackageReference Include=\u0026#34;MassTransit.AspNetCore\u0026#34; Version=\u0026#34;7.1.6\u0026#34; /\u0026gt; \u0026lt;PackageReference Include=\u0026#34;MassTransit.RabbitMQ\u0026#34; Version=\u0026#34;7.1.6\u0026#34; /\u0026gt;  è¨»å†ŠRabbitMQæœå‹™ //å¯ä»¥çœ‹åˆ°AddMassTransitéœ€è¦è¼¸å…¥Action typeçš„åƒæ•¸ï¼Œå°±æ˜¯å§”è¨—æŠŠä¸ç¢ºå®šçš„å‹•ä½œï¼Œäº¤ç”±å‘¼å«ç«¯ä¾†å¯«ã€‚ services.AddMassTransit(config =\u0026gt; { config.UsingRabbitMq((context, config) =\u0026gt; { //ä½¿ç”¨é«˜ç´šåˆ—éšŠå”è­°amqp://å¸³è™Ÿ:å¯†ç¢¼@ç¶²å€:port (æ–¹ä¾¿æª¢è¦–ï¼Œæ‡‰è©²å¯«åœ¨appsettings)  config.Host(\u0026#34;amqp://guest:guest@localhost:5672\u0026#34;); }); }); services.AddMassTransitHostedService();  å»ºç«‹ç™¼é€Eventçš„API [Route(\u0026#34;[action]\u0026#34;)] [HttpPost] [ProducesResponseType((int)HttpStatusCode.Accepted)] [ProducesResponseType((int)HttpStatusCode.BadRequest)] public async Task\u0026lt;ActionResult\u0026gt; Checkout([FromBody] BasketCheckout basketCheckout)//é›–ç„¶èªªå¯ä»¥ç›´æ¥ç”¨BasketCheckoutEventé¡å‹ï¼Œä½†æ˜¯åˆ†é–‹å¯«æ—¥å¾Œç¶­è­·ä¸Šæ¯”è¼ƒè¼•é¬†ã€‚ { //å–å¾—è³¼ç‰©è»Šå…§ç¸½é‡‘é¡  var basket = await _repository.GetBasket(basketCheckout.UserName); if(basket == null) { return BadRequest(); } //å»ºç«‹BasketCheckout Event  var eventMessage = _mapper.Map\u0026lt;BasketCheckoutEvent\u0026gt;(basketCheckout); //è¨­å®šEventè£¡é¢çš„ç¸½é‡‘é¡  eventMessage.TotalPrice = basket.TotalPrice; //å‚³é€Eventçµ¦RabbitMQ  await _publishEndpoint.Publish(eventMessage); //æ¸…ç©ºè³¼ç‰©è»Š  await _repository.DeleteBasket(basket.UserName); return Accepted(); }  Eventæ¥æ”¶ç«¯  è€æ¨£å­ï¼Œå®‰è£å¿…å‚™å¥—ä»¶ï¼Œè¨»å†Šæœå‹™ï¼Œä½†æ˜¯è¨»å†Šçš„åœ°æ–¹æœ‰é»ä¸ä¸€æ¨£ï¼Œéœ€è¦å¤šåšä¸€äº›è¨­å®šã€‚\nservices.AddMassTransit(config =\u0026gt; { //è¨­å®šEventè™•ç†å™¨BasketCheckoutConsumer(ä¸‹é¢æœƒå»º)  config.AddConsumer\u0026lt;BasketCheckoutConsumer\u0026gt;(); config.UsingRabbitMq((busRegistrationContext, rabbitMqBusFactoryConfig) =\u0026gt; { //ä½¿ç”¨é«˜ç´šåˆ—éšŠå”è­°amqp://å¸³è™Ÿ:å¯†ç¢¼@ç¶²å€:port  rabbitMqBusFactoryConfig.Host(Configuration[\u0026#34;EventBusSettings:HostAddress\u0026#34;]); //è¨­å®šæ¥æ”¶ç«¯é»(Queueçš„åå­, (ç«¯é»è¨­å®š)=\u0026gt;{è¨­å®šEventè™•ç†å™¨}  rabbitMqBusFactoryConfig.ReceiveEndpoint(EventBusConstants.BasketCheckoutQueue, endpointConfig =\u0026gt; { endpointConfig.ConfigureConsumer\u0026lt;BasketCheckoutConsumer\u0026gt;(busRegistrationContext); }); }); }); services.AddMassTransitHostedService(); //ä¹Ÿåˆ¥å¿˜è¨˜è¨»å†Šæˆ‘å€‘çš„Eventè™•ç†å™¨ services.AddScoped\u0026lt;BasketCheckoutConsumer\u0026gt;();  å»ºç«‹Eventè™•ç†å™¨ è£¡é¢çš„æ­¥é©Ÿå¾ˆç°¡å–®ï¼Œå…ˆæŠŠæ¥æ”¶åˆ°RabbitMqè£¡é¢çš„Event Mapæˆåœ¨Ordering.APIå¯ä»¥ç”¨çš„æ ¼å¼ï¼Œç™¼é€çµ¦mediatorä¾†è™•ç†ï¼Œmediatoræœƒè‡ªå‹•åˆ†é¡äº¤ç”±æ­£ç¢ºçš„çš„handlerä¾†è™•ç†æ¥ä¸‹ä¾†çš„é‚è¼¯ï¼Œæœ€å¾Œå›å‚³çµæœã€‚\n//å¯¦ä½œä»‹é¢IConsumer\u0026lt;è¦è™•ç†çš„Event\u0026gt;ï¼Œè¦èˆ‡publishéä¾†çš„EventåŒclassã€‚ public class BasketCheckoutConsumer : IConsumer\u0026lt;BasketCheckoutEvent\u0026gt;// { private readonly IMediator _mediator; private readonly IMapper _mapper; private readonly ILogger\u0026lt;BasketCheckoutConsumer\u0026gt; _logger; public BasketCheckoutConsumer(IMediator mediator, IMapper mapper, ILogger\u0026lt;BasketCheckoutConsumer\u0026gt; logger) { _mediator = mediator ?? throw new ArgumentNullException(nameof(mediator)); _mapper = mapper ?? throw new ArgumentNullException(nameof(mapper)); _logger = logger ?? throw new ArgumentNullException(nameof(logger)); } public async Task Consume(ConsumeContext\u0026lt;BasketCheckoutEvent\u0026gt; context) { var command = _mapper.Map\u0026lt;CheckoutOrderCommand\u0026gt;(context.Message); var result = await _mediator.Send(command); _logger.LogInformation(\u0026#34;BasketCheckoutEvent ConsumeæˆåŠŸ~~ Order Id : {newOrderId}\u0026#34;, result); } } åˆ°é€™é‚Šå°±å¯ä»¥åœ¨Basket.APIç”¢ç”ŸEventï¼Œå†é€érabbitmqå‚³é€ï¼Œæœ€å¾ŒEventäº¤ç”±Ording.APIè™•ç†äº†\n åƒè€ƒ  å¯¦ä½œå®˜ç¶²æ•™å­¸\nRabbitMQä»‹ç´¹\n","date":"2021-12-28T11:33:55+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/20211228_rabbitmq%E7%AD%86%E8%A8%98.md/","title":"RabbitMQç­†è¨˜"},{"content":" å»ºç«‹Dockerfile  å°å°ˆæ¡ˆé …ç›®æŒ‰å³éµ \u0026raquo; Add \u0026raquo; Docker Support \u0026raquo; Linux \u0026raquo; ç¢ºå®š\nè©²é …ç›®ä¸‹é¢å°±æœƒæœ‰Dockerfileï¼Œè£¡é¢æ˜¯å»ºç«‹å®¹å™¨çš„æŒ‡ä»¤æ–‡å­—æª”\n å»ºç«‹Docker Compose  å°å°ˆæ¡ˆé …ç›®æŒ‰å³éµ \u0026raquo; Add \u0026raquo; Container Orchestrator Support(å®¹å™¨å”èª¿å™¨æ”¯æ´) \u0026raquo; Docker Compose \u0026raquo; Linux \u0026raquo; ç¢ºå®š\nå¯ä»¥å°‡å¤šå€‹containeråˆè€Œç‚ºä¸€ï¼Œä¹Ÿæœƒå¤šä¸€å€‹Docker Compose é …ç›®\n#docker-compose.ymlservice:orderdb:#åŠ å…¥çš„serviceimage:mcr.microsoft.com/mssql/server:2019-latest#pullæ˜ åƒæª”çš„ä½ç½®#docker-compose.override.ymlservice:orderdb:container_name:orderdbenvironment:ACCEPT_EULA:\u0026#34;Y\u0026#34;SA_PASSWORD:\u0026#34;Max4129889\u0026#34;#system administratorå¯†ç¢¼restart:alwaysports:- \u0026#34;1433:1433\u0026#34; æ•´åˆã€åŸ·è¡Œæ˜ åƒæª”  åœ¨çµ‚ç«¯æ©ŸåŸ·è¡ŒDocker-compose\ndocker-compose -f ./docker-compose.yml -f ./docker-compose.override.yml up -d åˆ°é€™é‚ŠåŸºæœ¬ä¸Šå°±æå®šäº†ï¼ŒæŸ¥çœ‹ä¸€ä¸‹å®¹å™¨æœ‰æ²’æœ‰å¥½å¥½é‹ä½œ~\nå¦‚æœå‡ºç¾ERROR: yaml.parser.ParserError: while parsing a block mappingä¹‹é¡çš„éŒ¯èª¤\nå¾ˆæœ‰å¯èƒ½æ˜¯æ’ç‰ˆæœ‰èª¤ï¼Œå¯ä»¥é€éymlæª¢è¦–å™¨ä¾†é€²è¡ŒæŸ¥çœ‹\nå‡ºç¾docker.errors.DockerException: Error while fetching server API version: ('Connection aborted.', ConnectionRefusedError(61, 'Connection refused'))ç„¡æ³•é€£ç·šç­‰å•é¡Œ\néœ€è¦å…ˆé–‹å•ŸDocker Desktopå¾Œå†åŸ·è¡Œ\ndocker ps  SQL GUI  åœ¨windowsè£¡çš„Visual Studioå¯ä»¥ä½¿ç”¨Server Explorerç›´æ¥é€£ç·šDBé€²è¡ŒæŸ¥çœ‹\nåœ¨Macä¸‹çš„Visual Studioè²Œä¼¼æ²’æœ‰é€™å€‹åŠŸèƒ½ï¼Œå¿…é ˆæ”¹ç”¨åˆ¥çš„å·¥å…·ä¾†é€²è¡ŒæŸ¥çœ‹\nDBreaver\nå…è²»ã€å¥½ç”¨ã€æ”¯æŒå¤šç¨®DBï¼Œæ¨è–¦ä¸€ä¸‹~ğŸ˜„\n åƒè€ƒ  https://hub.docker.com/_/microsoft-mssql-server\nhttps://docs.microsoft.com/zh-tw/sql/linux/quickstart-install-connect-docker?view=sql-server-ver15\u0026pivots=cs1-bash\nymlæª¢è¦–å™¨\n","date":"2021-12-27T10:52:40+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/20211227_docker%E5%AE%B9%E5%99%A8%E5%8C%96_mssqlserver.md/","title":"Dockerå®¹å™¨åŒ–"},{"content":" nslookup  ç´€éŒ„ä¸€ä¸‹ä»Šå¤©å­¸åˆ°çš„æŒ‡ä»¤ï¼Œæƒ³è¦æŸ¥è©¢ç¶²ç«™æˆ–æ˜¯è³‡æ–™åº«çš„ipä½ç½®ï¼Œå°±å¯ä»¥ä½¿ç”¨nslookupä¾†æŸ¥è©¢ï¼Œåœ¨windowsã€macä¹Ÿéƒ½å¯ä»¥ç”¨ã€‚\nMacBook-Air ~ % nslookup www.google.com Server:\t172.20.10.1 Address:\t172.20.10.1#53 Non-authoritative answer: Name:\twww.google.com Address: 142.251.42.228 å‰é¢æ˜¯DNSçš„ä½ç½®\nNon-authoritative answerå‰‡æ˜¯ä»£è¡¨ç›´æ¥è®€å–DNSæš«å­˜ï¼Œæœªèªè­‰çš„ç­”æ¡ˆã€‚\n","date":"2021-12-23T09:46:07+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/20211223_nslookup%E6%9F%A5%E8%A9%A2ip%E4%BD%8D%E7%BD%AE.md/","title":"nslookupæŸ¥è©¢ipä½ç½®"},{"content":" ç°¡å–®ä»‹ç´¹  åœ¨å…ˆå‰çš„ç°¡æ½”æ¶æ§‹Application Layeræœ‰å¯«é€šç”¨çš„éåŒæ­¥Repositoryä»‹é¢(Asynchronous Generic Repository)\nåœ¨é€™è£¡é¢æœ‰å¾ˆå¤šå¥‡æ€ªçš„æ±è¥¿ğŸ˜±\nå…ˆä¾†çœ‹çœ‹é€šç”¨çš„éåŒæ­¥Repositoryä»‹é¢é•·ä»€éº¼æ¨£å­\npublic interface IAsyncRepository\u0026lt;T\u0026gt; where T : EntityBase { Task\u0026lt;IReadOnlyList\u0026lt;T\u0026gt;\u0026gt; GetAllAsync(); Task\u0026lt;IReadOnlyList\u0026lt;T\u0026gt;\u0026gt; GetAsync(Expression\u0026lt;Func\u0026lt;T, bool\u0026gt;\u0026gt; predicate); Task\u0026lt;IReadOnlyList\u0026lt;T\u0026gt;\u0026gt; GetAsync(Expression\u0026lt;Func\u0026lt;T, bool\u0026gt;\u0026gt; predicate = null, Func\u0026lt;IQueryable\u0026lt;T\u0026gt;, IOrderedQueryable\u0026lt;T\u0026gt;\u0026gt; orderBy = null, string includeString = null, bool disableTracking = true); Task\u0026lt;IReadOnlyList\u0026lt;T\u0026gt;\u0026gt; GetAsync(Expression\u0026lt;Func\u0026lt;T, bool\u0026gt;\u0026gt; predicate = null, Func\u0026lt;IQueryable\u0026lt;T\u0026gt;, IOrderedQueryable\u0026lt;T\u0026gt;\u0026gt; orderBy = null, List\u0026lt;Expression\u0026lt;Func\u0026lt;T, object\u0026gt;\u0026gt;\u0026gt; includes = null, bool disableTracking = true); Task\u0026lt;T\u0026gt; GetByIdAsync(int id); Task\u0026lt;T\u0026gt; AddAsync(T entity); Task UpdateAsync(T entity); Task DeleteAsync(T entity); } åœ¨GetAsync()è£¡é¢æœ‰å¾ˆå¤šæ±è¥¿Expression\u0026lt;Func\u0026lt;T, bool\u0026gt;\u0026gt;ã€Func\u0026lt;IQueryable\u0026lt;T\u0026gt;, IOrderedQueryable\u0026lt;T\u0026gt;\u0026gt;ã€List\u0026lt;Expression\u0026lt;Func\u0026lt;T, object\u0026gt;\u0026gt;\u0026gt;\nFuncæ˜¯Delegateé¡åˆ¥ï¼Œæ˜¯ä¸€ç¨®å¯ä»¥reference methodçš„é¡åˆ¥ï¼Œä»£è¡¨å¯ä»¥æŠŠæ–¹æ³•ç•¶ä½œåƒæ•¸ä¸Ÿé€²ä¾†ã€‚\nExpressionæ˜¯å±¬æ–¼Linqä¸‹çš„ä¸€å€‹é¡åˆ¥\nIQueryable\u0026lt;T\u0026gt;å°ç‰¹å®šå·²çŸ¥çš„é¡å‹ï¼ŒæŸ¥è©¢åŠŸèƒ½\nIOrderedQueryable\u0026lt;T\u0026gt;æ’åºå¾Œçš„çµæœ\næ‰€ä»¥æˆ‘å€‘å¯ä»¥é€™æ¨£å‘¼å«\nIQueryable\u0026lt;T\u0026gt; query = _dbContext.Set\u0026lt;T\u0026gt;(); if (disableTracking) query = query.AsNoTracking(); if (!string.IsNullOrWhiteSpace(includeString)) query = query.Include(includeString); if (predicate != null) query = query.Where(predicate); if (orderBy != null) return await orderBy(query).ToListAsync(); return await query.ToListAsync(); }  åƒè€ƒ  ","date":"2021-12-22T15:24:54+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/20211222_linqexpression.md/","title":"Linq Expression"},{"content":"åŸºç¤è¨­æ–½å±¤ï¼Œå°‡æˆ‘å€‘Application Layerèªªçš„é‚£äº›è™•ç†ï¼Œé€£æ¥åˆ°è³‡æ–™åº«ä¸Šã€‚\nåœ¨é€™ä¸€å±¤æˆ‘å€‘å°‡ä½¿ç”¨Entity Framework Core AKA EF Coreï¼ŒEFCoreçš„ç›®çš„æ˜¯è®“ç¨‹å¼è¨­è¨ˆå¸«èƒ½å¤ ä»¥ç†Ÿç¿’çš„èªè¨€å»æ“ä½œè³‡æ–™åº«ï¼Œè€Œéä½¿ç”¨sqlèªæ³•ç„¶å¾Œå†è½‰æˆæˆ‘å€‘çš„è³‡æ–™æ¨¡å‹ã€‚\nå…ˆå»NuGetè£Microsoft.EntityFrameworkCore.SqlServerï¼Œä½¿ç”¨.Net 5.0çš„è©±ç‰ˆæœ¬åªæ”¯æ´åˆ°5.0.xä»¥ä¸‹ï¼Œ6.0.0ä¸æ”¯æ´ã€‚\n Ordering.API  é€™è·Ÿinfrastructureä¸€æ¨£ï¼Œéƒ½æ˜¯æœ€å¤–é¢ä¸€å±¤ï¼Œå¯«ä¸€èµ·æ¯”è¼ƒå¥½æ•´ç†å§\nController å¾—åˆ©æ–¼mediatorçš„handlerï¼Œæˆ‘å€‘æ•´å€‹controllerå°±æ˜¯ä¸€å€‹æ¸…çˆ½ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯å»ºç«‹Requestï¼Œä¸Ÿçµ¦Handlerä¾†è™•ç†ï¼Œæœ€å¾ŒæŠŠè³‡æ–™å›å‚³å°±æå®šäº†ã€‚\n[ApiController] [Route(\u0026#34;[controller]\u0026#34;)] public class OrderController : ControllerBase { private readonly IMediator _mediator; public OrderController(IMediator mediator) { _mediator = mediator; } [HttpGet(\u0026#34;{userName}\u0026#34;, Name = \u0026#34;GetOrder\u0026#34;)] [ProducesResponseType(typeof(IEnumerable\u0026lt;OrdersVm\u0026gt;), (int)HttpStatusCode.OK)] public async Task\u0026lt;ActionResult\u0026lt;IEnumerable\u0026lt;OrdersVm\u0026gt;\u0026gt;\u0026gt; GetOrdersByUserName(string userName) { //å»ºç«‹Request  var query = new GetOrdersListQuery(userName); //ç™¼é€çµ¦Handlerè™•ç†  List\u0026lt;OrdersVm\u0026gt; orders = await _mediator.Send(query); return Ok(orders); } [HttpPost(Name = \u0026#34;CheckoutOrder\u0026#34;)] [ProducesResponseType(StatusCodes.Status200OK)] public async Task\u0026lt;ActionResult\u0026lt;int\u0026gt;\u0026gt; CheckoutOrder([FromBody] CheckoutOrderCommand command) { var result = await _mediator.Send(command); return Ok(result); } [HttpPost(Name = \u0026#34;UpdateOrder\u0026#34;)] [ProducesResponseType(StatusCodes.Status200OK)] [ProducesResponseType(StatusCodes.Status404NotFound)] [ProducesDefaultResponseType] public async Task\u0026lt;ActionResult\u0026gt; UpdateOrder([FromBody] UpdateOrderCommand command) { await _mediator.Send(command); return NoContent(); } [HttpPost(\u0026#34;{id}\u0026#34;, Name = \u0026#34;DeleteOrder\u0026#34;)] [ProducesResponseType(StatusCodes.Status200OK)] [ProducesResponseType(StatusCodes.Status404NotFound)] [ProducesDefaultResponseType] public async Task\u0026lt;ActionResult\u0026gt; DeleteOrder(int id) { var command = new DeleteOrderCommand() { Id = id }; await _mediator.Send(command); return NoContent(); } }  Persistence  æˆ‘å€‘åœ¨å¯«å…¥è³‡æ–™åº«å‰è¦ç´€éŒ„æ–°å¢ã€ä¿®æ”¹æ™‚é–“ã€‚\nOrderContext //ç¹¼æ‰¿EFCoreçš„DbContextæ¡†æ¶é¡åˆ¥ public class OrderContext : DbContext { public OrderContext(DbContextOptions options) : base(options) { } //Ordersè³‡æ–™è¡¨  public DbSet\u0026lt;Order\u0026gt; Orders { get; set; } //æˆ‘å€‘å¯ä»¥overrideè¨±å¤šDbContextæ‰€æä¾›çš„æ–¹æ³•  //è¤‡å¯«SaveChangesAsyncåŠŸèƒ½  public override Task\u0026lt;int\u0026gt; SaveChangesAsync(CancellationToken cancellationToken = default) { //åœ¨å„²å­˜è®Šæ›´å‰ä¿®æ”¹æ—¥æœŸ  foreach(var entry in ChangeTracker.Entries\u0026lt;EntityBase\u0026gt;()) { //åˆ¤æ–·å¯«å…¥çš„ç‹€æ…‹(Addedã€Unchangedã€Modifiedã€Deleted)  switch (entry.State) { case EntityState.Added: entry.Entity.CreatedDate = DateTime.Now; entry.Entity.CreatedBy = \u0026#34;Max\u0026#34;; break; case EntityState.Modified: entry.Entity.LastModifiedDate = DateTime.Now; entry.Entity.LastModifiedBy = \u0026#34;Max\u0026#34;; break; } } return base.SaveChangesAsync(cancellationToken); } }  Repositories  RepositoryBase æ“ä½œè³‡æ–™åº«çš„éƒ¨åˆ†ï¼Œå°‡åœ¨Application layerçš„IAsyncRepositoryé€£èµ·ä¾†ã€‚\npublic class RepositoryBase\u0026lt;T\u0026gt; : IAsyncRepository\u0026lt;T\u0026gt; where T : EntityBase { protected readonly OrderContext _dbContext; public RepositoryBase(OrderContext dbcontext) { _dbContext = dbcontext; } public async Task\u0026lt;IReadOnlyList\u0026lt;T\u0026gt;\u0026gt; GetAllAsync() { return await _dbContext.Set\u0026lt;T\u0026gt;().ToListAsync(); } public async Task\u0026lt;IReadOnlyList\u0026lt;T\u0026gt;\u0026gt; GetAsync(Expression\u0026lt;Func\u0026lt;T, bool\u0026gt;\u0026gt; predicate) { return await _dbContext.Set\u0026lt;T\u0026gt;().Where(predicate).ToListAsync(); } public async Task\u0026lt;IReadOnlyList\u0026lt;T\u0026gt;\u0026gt; GetAsync(Expression\u0026lt;Func\u0026lt;T, bool\u0026gt;\u0026gt; predicate = null, Func\u0026lt;IQueryable\u0026lt;T\u0026gt;, IOrderedQueryable\u0026lt;T\u0026gt;\u0026gt; orderBy = null, string includeString = null, bool disableTracking = true) { IQueryable\u0026lt;T\u0026gt; query = _dbContext.Set\u0026lt;T\u0026gt;(); if (disableTracking) query = query.AsNoTracking(); if (!string.IsNullOrWhiteSpace(includeString)) query = query.Include(includeString); if (predicate != null) query = query.Where(predicate); if (orderBy != null) return await orderBy(query).ToListAsync(); return await query.ToListAsync(); } public async Task\u0026lt;IReadOnlyList\u0026lt;T\u0026gt;\u0026gt; GetAsync(Expression\u0026lt;Func\u0026lt;T, bool\u0026gt;\u0026gt; predicate = null, Func\u0026lt;IQueryable\u0026lt;T\u0026gt;, IOrderedQueryable\u0026lt;T\u0026gt;\u0026gt; orderBy = null, List\u0026lt;Expression\u0026lt;Func\u0026lt;T, object\u0026gt;\u0026gt;\u0026gt; includes = null, bool disableTracking = true) { IQueryable\u0026lt;T\u0026gt; query = _dbContext.Set\u0026lt;T\u0026gt;(); if (disableTracking) query = query.AsNoTracking(); if (includes != null) query = includes.Aggregate(query, (current, include) =\u0026gt; current.Include(include)); if (predicate != null) query = query.Where(predicate); if (orderBy != null) return await orderBy(query).ToListAsync(); return await query.ToListAsync(); } public virtual async Task\u0026lt;T\u0026gt; GetByIdAsync(int id) { return await _dbContext.Set\u0026lt;T\u0026gt;().FindAsync(id); } public async Task\u0026lt;T\u0026gt; AddAsync(T entity) { _dbContext.Set\u0026lt;T\u0026gt;().Add(entity); await _dbContext.SaveChangesAsync(); return entity; } public async Task UpdateAsync(T entity) { _dbContext.Entry(entity).State = EntityState.Modified; await _dbContext.SaveChangesAsync(); } public async Task DeleteAsync(T entity) { _dbContext.Set\u0026lt;T\u0026gt;().Remove(entity); await _dbContext.SaveChangesAsync(); } } å¯¦ä½œIOrderRepository\npublic class OrderRepository : RepositoryBase\u0026lt;Order\u0026gt;, IOrderRepository { //ç¹¼æ‰¿RepositoryBaseï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨_dbContext  public OrderRepository(OrderContext dbConext) : base(dbConext) { } public async Task\u0026lt;IEnumerable\u0026lt;Order\u0026gt;\u0026gt; GetOrdersByUserName(string userName) { var orderList = await _dbContext.Orders.Where(o =\u0026gt; o.UserName == userName).ToListAsync(); return orderList; } }  Mail  Mail Serviceæ˜¯ä½¿ç”¨SendGridçš„APIï¼Œç°¡å–®å¥½ç”¨ã€‚\nNuGetè£SendGrid\n//ç¹¼æ‰¿æˆ‘å€‘Application layerçš„IEmailService public class EmailService : IEmailService { public EmailSettings _emailSettings; public ILogger\u0026lt;EmailService\u0026gt; _logger; public EmailService(IOptions\u0026lt;EmailSettings\u0026gt; emailSettings, ILogger\u0026lt;EmailService\u0026gt; logger) { _emailSettings = emailSettings.Value; _logger = logger; } public async Task\u0026lt;bool\u0026gt; SendEmail(Email email) { var client = new SendGridClient(_emailSettings.ApiKey);//ä½¿ç”¨SendGridç™¼é€emailçš„æœå‹™  var from = new EmailAddress(_emailSettings.FromAddress, _emailSettings.FromName);//å¯„ä»¶äºº  var subject = email.Subject;//ä¸»æ—¨  var to = new EmailAddress(email.To);//æ”¶ä»¶äºº  //emailæœ¬é«”  var emailBody = email.Body; var htmlContent = \u0026#34;\u0026lt;strong\u0026gt;and easy to do anywhere, even with C#\u0026lt;/strong\u0026gt;\u0026#34;; var msg = MailHelper.CreateSingleEmail(from, to, subject, emailBody, htmlContent);//å»ºç«‹ä¿¡ä»¶  var response = await client.SendEmailAsync(msg);//ç™¼é€ä¿¡ä»¶  if(response.StatusCode == System.Net.HttpStatusCode.Accepted || response.StatusCode == System.Net.HttpStatusCode.OK) { _logger.LogInformation(\u0026#34;Emailç™¼é€æˆåŠŸ\u0026#34;); return true; } _logger.LogError(\u0026#34;Emailç™¼é€å¤±æ•—\u0026#34;); return false; } }  DI Service Collection  æ‰“åŒ…è¦è¨»å†Šçš„æœå‹™\npublic static class InfrastructureServiceRegistration { public static IServiceCollection AddInfrastructureService(this IServiceCollection services, IConfiguration configuration) { //ConnectionStringä¾†è‡ªæ–¼Ordering.APIçš„appsettings.json  services.AddDbContext\u0026lt;OrderContext\u0026gt;(options =\u0026gt; options.UseSqlServer(configuration.GetConnectionString(\u0026#34;OrderingConnectionString\u0026#34;))); services.AddScoped(typeof(IAsyncRepository\u0026lt;\u0026gt;), typeof(RepositoryBase\u0026lt;\u0026gt;)); services.AddScoped\u0026lt;IOrderRepository, OrderRepository\u0026gt;(); services.Configure\u0026lt;EmailSettings\u0026gt;(c =\u0026gt; configuration.GetSection(\u0026#34;EmailSettings\u0026#34;)); services.AddTransient\u0026lt;IEmailService, EmailService\u0026gt;(); return services; } } ä¸€æ¬¡åœ¨Order.APIçš„Startup.cså…§è¨»å†ŠApplicationèˆ‡Infrastructureçš„æœå‹™\n// This method gets called by the runtime. Use this method to add services to the container. public void ConfigureServices(IServiceCollection services) { services.AddApplicationServices(); services.AddInfrastructureServices(Configuration); services.AddControllers(); services.AddSwaggerGen(c =\u0026gt; { c.SwaggerDoc(\u0026#34;v1\u0026#34;, new OpenApiInfo { Title = \u0026#34;Ordering.API\u0026#34;, Version = \u0026#34;v1\u0026#34; }); }); }  ç”ŸæˆMigrationæª”æ¡ˆ  é·ç§»è³‡æ–™åº«å¯ä»¥æƒ³åƒæˆè³‡æ–™åº«çš„ç‰ˆæœ¬æ§åˆ¶ï¼Œè¨˜éŒ„æˆ‘å€‘ç”¨æˆå°è³‡æ–™åº«çš„è³‡æ–™çµæ§‹åšçš„è®Šæ›´ï¼Œä¿æŒ EF Core æ¨¡å‹èˆ‡è³‡æ–™åº«çµæ§‹æè¿°åŒæ­¥ï¼ŒEF Core æ¨¡å‹æˆç‚ºçœŸå¯¦ä¾†æºï¼Œè«‹ä½¿ç”¨ç§»è½‰ã€‚ ç•¶è®Šæ›´ EF Core æ¨¡å‹æ™‚ï¼Œé€™ç¨®æ–¹å¼æœƒä»¥éå¢æ–¹å¼å°‡å°æ‡‰çš„çµæ§‹æè¿°è®Šæ›´å¥—ç”¨è‡³è³‡æ–™åº«ã€‚\nå…ˆåœ¨Order.APIè£Microsoft.EntityFrameworkCore.Toolsï¼Œæˆ‘å€‘å¸Œæœ›ç”Ÿæˆçš„æª”æ¡ˆåœ¨Infrastructureå…§ï¼Œæ‰€ä»¥æ¥è‘—åœ¨Package Manage Consoleè£¡æŠŠé è¨­å°ˆæ¡ˆåˆ‡æ›åˆ°Order.Infrastructureå¾Œï¼Œè¼¸å…¥Add-Migration InitialCreateã€‚\nä»¥ä¸Šæ˜¯ä¾ç…§èª²ç¨‹æ­¥é©Ÿï¼Œé€™åœ¨windowsä¸‹ä¹Ÿè¨±å¯è¡Œï¼Œä½†å¾ˆéºæ†¾æˆ‘çš„åœ¨Macä¸Šè·‘ï¼Œä¸€ç›´å‡ºç¾éŒ¯èª¤ğŸ˜ ã€‚\nUnable to create an object of type 'OrderContext'. For the different patterns supported at design time, see https://go.microsoft.com/fwlink/?linkid=851728\næœ€å¾Œæ‰¾äº†å¾ˆä¹…ï¼Œåœ¨Macä¸Šè¦ç”ŸæˆMigrationæª”æ¡ˆçš„æ­¥é©Ÿå¦‚ä¸‹\ncd åˆ°DbContextçš„é‚£ä¸€å€‹é …ç›®è³‡æ–™å¤¾ä¸‹ï¼Œé€™é‚Šæ˜¯Ordering.Infrastructure/\næ¥è‘—åŸ·è¡Œdotnet restore\ndotnet ef --startup-project ../Ordering.Api/ migrations add InitialCreate --verbose --startup-project è¨­å®šå•Ÿå‹•å°ˆæ¡ˆ\nmigrations add ç”ŸæˆMigrationæª”æ¡ˆ\n--verbose è¼¸å‡ºlogï¼Œæ–¹ä¾¿æŸ¥è©¢éŒ¯èª¤\nåƒè€ƒ: https://stackoverflow.com/questions/55123853/unable-to-create-an-object-of-type-dbcontexts-name-for-the-different-patte\næœ€å¾Œæœƒç”Ÿæˆä¸€å€‹Migrationè³‡æ–™å¤¾ï¼Œè£¡é¢åŒ…å«ç´€éŒ„ç‰ˆæœ¬çš„ç¨‹å¼ç¢¼ã€ç´€éŒ„è³‡æ–™æ¨¡å‹å¦‚ä½•å°æ‡‰åˆ°è³‡æ–™åº«çš„ï¼Œæœ€å¾Œæ˜¯Modelå¿«ç…§ã€‚\næ›´å¤šæ“ä½œæˆ–èªªæ˜: https://ithelp.ithome.com.tw/articles/10240606\n é·ç§»è³‡æ–™åº«  æˆ‘å€‘åœ¨Order.APIçš„Programè£¡ï¼Œåœ¨hoståŸ·è¡Œå‰é€²è¡Œè³‡æ–™åº«é·ç§»çš„å‹•ä½œï¼Œä¸¦æŠŠseederçš„æ–¹æ³•ç•¶ä½œåƒæ•¸å‚³é€é€²å»ã€‚\npublic class Program { public static void Main(string[] args) { var host = CreateHostBuilder(args).Build(); //æŠŠæ–¹æ³•ç•¶ä½œåƒæ•¸å‚³é€éå»  host.MigrateDatabase\u0026lt;OrderContext\u0026gt;((context, services)=\u0026gt; { //è¨˜å¾—åŠ ä¸Šusing Microsoft.Extensions.DependencyInjection;  //é€™æ¨£æ‰å¯ä»¥ä½¿ç”¨GetServiceçš„æ–¹æ³•  var logger = services.GetService\u0026lt;ILogger\u0026lt;OrderContextSeed\u0026gt;\u0026gt;(); OrderContextSeed.SeedAsync(context, logger).Wait(); }); host.Run(); } } é€™é‚Šæœƒé€²è¡Œè³‡æ–™åº«é·ç§»çš„å‹•ä½œï¼Œè‹¥ç™¼ç”ŸéŒ¯èª¤å‰‡æœƒé‡æ–°åŸ·è¡Œã€‚\npublic static class HostExtensions { //Action\u0026lt;A,B\u0026gt;ä»£è¡¨å…©å€‹è¼¸å…¥ä¸å›å‚³çš„å°è£å‡½æ•¸ï¼Œå°±åƒ(A,B)=\u0026gt;{ ... }æ–¹æ³•  public static IHost MigrateDatabase\u0026lt;TContext\u0026gt;(this IHost host, Action\u0026lt;TContext, IServiceProvider\u0026gt; seeder, int? retry = 10) where TContext : DbContext { using (var scope = host.Services.CreateScope()) { var services = scope.ServiceProvider; var logger = services.GetRequiredService\u0026lt;ILogger\u0026lt;TContext\u0026gt;\u0026gt;(); var context = services.GetService\u0026lt;TContext\u0026gt;();//å–å¾—OrderContextçš„åœ°æ–¹  try { logger.LogInformation($\u0026#34;é–‹å§‹é·ç§»è³‡æ–™åº«æˆ{typeof(TContext).Name}çš„å½¢ç‹€\u0026#34;); context.Database.Migrate();//åŸ·è¡Œé·ç§»  seeder(context, services);//åŸ·è¡Œseederï¼Œå‚³é€é€²ä¾†çš„æ–¹æ³•ã€‚  logger.LogInformation($\u0026#34;é·ç§»è³‡æ–™åº«æˆ{typeof(TContext).Name}çš„å½¢ç‹€çµæŸ\u0026#34;); } catch (Exception err) { logger.LogError(err, \u0026#34;å¯«å…¥è³‡æ–™åº«æ™‚ç™¼ç”ŸéŒ¯èª¤\u0026#34;); if (retry \u0026gt; 0) { retry--; System.Threading.Thread.Sleep(2000); MigrateDatabase\u0026lt;TContext\u0026gt;(host, seeder, retry); } } } return host; } } ä¹‹æ‰€ä»¥è¦é€™æ¨£å¯«çš„åŸå› æ˜¯MigrateDataBase\u0026lt;TContext\u0026gt;æ˜¯é€éæ³›å‹ä¾†è™•ç†ï¼Œ\nç›´åˆ°var context = services.GetService\u0026lt;TContext\u0026gt;();æ‰å–å¾—OrderContextçš„åœ°æ–¹\nå¯«åœ¨è£¡é¢ä¸¦æ²’æœ‰è¾¦æ³•ç¢ºå®šTContextçš„é¡å‹ï¼Œå¯«åœ¨å¤–é¢çš„è©±å°±å¯ä»¥ç¢ºå®š\nå› ç‚ºhost.MigrateDatabase\u0026lt;OrderContext\u0026gt;åœ¨é€™é‚Šå°±ç¢ºå®šå‹åˆ¥çš„åŒæ™‚ï¼Œä¹Ÿç¢ºå®šseederçš„ç¬¬ä¸€å€‹åƒæ•¸äº†\n é€£æ¥è³‡æ–™åº«èˆ‡Dockerå®¹å™¨åŒ–  DBæ˜¯ä½¿ç”¨Microsoft SQL Serverçš„æ˜ åƒæª” è©³ç´°çš„æ“ä½œå¯ä»¥åƒè€ƒé€™ç¯‡Dockerå®¹å™¨åŒ–_MSSQLServer\næ¶è¨­å¥½è³‡æ–™åº«å¾Œï¼Œåœ¨appsettingsè£¡åŠ ä¸Šé€£æ¥å­—ä¸²ï¼ŒServerä½ç½®ç‚ºlocalhosté è¨­portç‚º1433ï¼Œå¸³å¯†ç‚ºsa/Max4129889\n\u0026#34;ConnectionStrings\u0026#34;: { \u0026#34;OrderingConnectionString\u0026#34;: \u0026#34;Server=localhost;Database=OrderDb;User Id=sa;Password=Max4129889;\u0026#34; } åˆ°é€™é‚ŠåŸºæœ¬ä¸Šå°±å¯ä»¥æ¸¬è©¦ä¸€ä¸‹æˆ‘å€‘çš„Ordering.APIï¼Œæ²’å•é¡Œå¾Œæ¥è‘—ä¹ŸæŠŠOrdering.APIå®¹å™¨åŒ–ï¼Œè·Ÿé€™ç¯‡Dockerå®¹å™¨åŒ–_MSSQLServerè£¡é¢çš„æ“ä½œä¸€æ¨£ï¼ŒDockerfileã€Docker-compose.ymlä¹Ÿéƒ½æœƒè‡ªå‹•è¨­å®šå¥½ï¼Œæˆ‘å€‘åªè¦åœ¨Docker-compose.override.ymlè£¡åšä¸€äº›è¨­å®šå³å¯ã€‚\né€™é‚Šçš„é€£çµå­—ä¸²æ”¹æˆä¸€è¡Œå†’è™Ÿã€é›™å¼•è™Ÿè¦åšèª¿æ•´ï¼Œæœ€é‡è¦çš„æ˜¯Server=orderdbï¼Œæ”¹æŒ‡å‘orderdb(MSSQLçš„å¾®æœå‹™)ã€‚\nordering.api:container_name:ordering.apienvironment:- ASPNETCORE_ENVIRONMENT=Development- \u0026#34;ConnectionStrings__OrderingConnectionString=Server=orderdb;Database=OrderDb;User Id=sa;Password=Max4129889;\u0026#34;depends_on:- orderdbports:- \u0026#34;8004:80\u0026#34;æœ€å¾ŒåŸ·è¡Œdocker-composeæŒ‡ä»¤ï¼Œæå®šæ”¶å·¥ã€‚\n åƒè€ƒ  Dockerå®¹å™¨åŒ–_MSSQLServer\nç°¡æ½”æ¶æ§‹ Application Layer\nç°¡æ½”æ¶æ§‹ Infrastructure Layer\nhttps://www.udemy.com/course/microservices-architecture-and-implementation-on-dotnet/\n","date":"2021-12-22T13:32:25+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/20211222_%E7%B0%A1%E6%BD%94%E6%9E%B6%E6%A7%8Binfrastructure.md/","title":"ç°¡æ½”æ¶æ§‹ Infrastructure Layer"},{"content":" æ†‘è­‰  ä¸»è¦çš„åŠŸèƒ½æ˜¯ç¢ºèªå…¬é‘°æ“æœ‰è€…çš„èº«ä»½ï¼Œé¿å…æˆ‘å€‘æ‹¿åˆ°å†’ç”¨è€…çš„å…¬é‘°ã€‚\nè¦æ€éº¼ç¢ºå®šå‘¢ï¼Ÿæ‰¾å¤§å®¶éƒ½ä¿¡ä»»çš„å…¬æ­£çš„ç¬¬ä¸‰æ–¹ä¾†ï¼Œå°±æ˜¯æ•¸ä½æ†‘è­‰èªè­‰æ©Ÿæ§‹(Certificate Authorityï¼ŒCA)ã€‚\nè¦å–å¾—æ†‘è­‰ï¼Œæ‡‰å…ˆå‘CAæå‡ºç”³è«‹ï¼ŒCAåˆ¤æ˜ç”³è«‹è€…çš„èº«åˆ†å¾Œï¼Œç‚ºä¹‹åˆ†é…ä¸€å€‹å…¬é‘°ï¼Œä¸¦å°‡è©²å…¬é‘°èˆ‡å…¶èº«åˆ†è³‡è¨Šç¹«çµï¼Œç‚ºè©²æ•´é«”ç°½åï¼Œç°½åå¾Œçš„æ•´é«”å³ç‚ºæ†‘è­‰ï¼Œç™¼é‚„çµ¦ç”³è«‹è€…ã€‚\nåœ¨å…¬å¸ç”¨çš„é€šå¸¸æ˜¯è¬ç”¨æ†‘è­‰ï¼Œé€£åŒå­ç¶²åŸŸéƒ½å¯ä»¥ç”¨çš„æ†‘è­‰*.google.comï¼Œblog.google.comã€mail.google.comç­‰ï¼Œéƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ç›¸åŒçš„æ†‘è­‰ã€‚\n æºé€šæµç¨‹  ç”¨æˆ¶ - - - - - - HTTPS ä¼ºæœå™¨æ‚¨å¥½ï¼Œæˆ‘æ”¯æ´TLS XXç‰ˆæœ¬ - - - - - \u0026raquo; ä¼ºæœå™¨\nç”¨æˆ¶ \u0026laquo; - - - - - - - Hi é€™æ˜¯æˆ‘çš„æ†‘è­‰ - - - - - - - - - - - - ä¼ºæœå™¨\nç”¨æˆ¶ ç¢ºèªæ†‘è­‰æ²’æœ‰å•é¡Œ\u0026hellip;(ç”¨CAçš„å…¬é‘°å°é‚£å€‹æ†‘è­‰ä¸Šçš„ç°½å­—é€²è¡Œé©—è­‰)\nç¢ºèªä¸æ˜¯ä¸­é–“äººå¾Œï¼Œå°±å¯ä»¥é€²è¡Œé‡‘é‘°äº¤æ›çš„æ­¥é©Ÿäº†ï¼Œä¸¦ç¶“éå„ç¨®æ¼”ç®—æ³•è®“ä½ å¯ä»¥ç›´æ¥å‚³è³‡æ–™ï¼Œä¸”ä¸ç”¨æ“”å¿ƒè¢«ç«Šè½ã€‚\n åƒè€ƒ  https://zh.wikipedia.org/wiki/%E8%AF%81%E4%B9%A6%E9%A2%81%E5%8F%91%E6%9C%BA%E6%9E%84\nhttps://www.youtube.com/watch?v=63tKc67T2jM\nhttps://medium.com/@clu1022/%E9%82%A3%E4%BA%9B%E9%97%9C%E6%96%BCssl-tls%E7%9A%84%E4%BA%8C%E4%B8%89%E4%BA%8B-%E4%B9%9D-ssl-communication-31a2a8a888a6\n","date":"2021-12-21T13:22:15+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/20211221_%E6%8F%9B%E6%86%91%E8%AD%89.md/","title":"æ›æ†‘è­‰"},{"content":" è³¼è²·åŸå›   åŠ å…¥äº†XBOX Game Passå¾Œï¼ŒéŠæˆ²ç©ä¸å®Œï¼Œç©ºé–“ä¸å¤ æ”¾äº†å•Šï¼ŒåŸå…ˆåœ°å¹³ç·š5æ˜¯æ”¾åœ¨å‚³çµ±ç¡¬ç¢Ÿè£¡ï¼Œé–‹è»Šé–‹åˆ°ä¸€åŠï¼Œè·¯ç›´æ¥ä¸è¦‹ï¼Œé€²å…¥éŠæˆ²ä¹Ÿè¦ç­‰å€‹3åˆ†é˜ï¼Œé€Ÿåº¦å¯¦åœ¨å¤ªæ…¢äº†ã€‚\næ²’ä»€éº¼æ™‚é–“åšåŠŸèª²ï¼Œè¶•åœ¨é›™12çµæŸå‰ä¸‹å–®å„ªæƒ æ¯”è¼ƒå¤šï¼ŒåŸæœ¬æƒ³è¦é€épchome+Lineå°è³¼ï¼Œä¸€æ²’æ³¨æ„æ™‚é–“éŒ¯éäº†å°è³¼å›é¥‹çš„æ™‚é–“ï¼Œæ”¹å»è¦çš®åŸåƒ¹å±‹è²·ï¼Œå›é¥‹å°‘äº†ä¸€é»ï¼Œä½†ä¹Ÿé‚„è¡Œå§ï¼Œ2244$ï¼Œæ²’æ™‚é–“è§£é‡‹äº†ï¼Œå¿«ä¸Šè»Šã€‚\nç”±æ–¼æˆ‘çš„ä¸»æ©Ÿæ¿x470iå‰©ä¸»æ¿å¾Œé¢ä¸€å€‹m.2æ’æ§½å¯ä»¥ç”¨ï¼ŒèƒŒé¢æ²’æœ‰æ•£ç†±ç‰‡å¯ä»¥ç”¨ï¼Œitxæ©Ÿæ®¼åˆå®¹æ˜“ç©ç†±ï¼Œæ‰€ä»¥ä¸»è¦è¨´æ±‚æ˜¯å¸Œæœ›ç¡¬ç¢Ÿæº«åº¦èƒ½å¤ ä½ï¼Œç™¼ç†±é‡å°é»ã€‚\n\rè—è—çš„çœ‹èµ·ä¾†å¾ˆæ¸…æ¶¼ğŸ¥¶\r\né †å¸¶ä¸€æï¼Œéå»æ“æœ‰ä¸å°‘é¡†å‚³çµ±ç¡¬ç¢Ÿ(å¤§æ¦‚8ã€9é¡†)ï¼Œåªå£éWDç‰Œçš„ï¼Œå€‹äººè¦ºå¾—æœ€è€æ“çš„æ˜¯HGST(åœ¨è¢«WDè²·ä¸‹å‰)ï¼Œå¯æƒœç¾åœ¨éƒ½è²·ä¸åˆ°äº†ï¼Œç¾åœ¨é€™é¡†æˆ‘ä¹Ÿé‚„åœ¨æœå½¹ï¼Œå°±æ˜¯é€Ÿåº¦æ…¢äº†äº›ã€‚å†çµ¦åƒéHGSTå£æ°´çš„WDä¸€å€‹æ©Ÿæœƒã€‚\n ç§»å‹•éŠæˆ²åˆ°æ–°ç¡¬ç¢Ÿè£¡  è¨­å®š \u0026raquo; æ‡‰ç”¨ç¨‹å¼ \u0026raquo; æ‰¾åˆ°éŠæˆ² \u0026raquo; ç§»å‹•\nå°±å¯ä»¥ç›´æ¥ç§»å‹•åˆ°æ–°çš„ç¡¬ç¢Ÿå»äº†ï¼Œé‚„å¥½ä¸ç”¨é‡æ–°ä¸‹è¼‰å¹¾ç™¾Gçš„æª”æ¡ˆã€‚\n æ›¬ä¸€ä¸‹é›»è…¦ç…§  \ritxå°±æ˜¯æ¡Œé¢å¸å¡µå™¨\r\né€™å°é›»è…¦è‡ªå¾è£å¥½å¾Œå°±å†ä¹Ÿæ²’æ‹†éäº†ï¼Œé€™çµ„è£å¯¦åœ¨å¤ªéº»ç…©äº†XDï¼Œæœ‰å¤ é›£è£ï¼Œç·šä¹Ÿæ˜¯æˆ‘è‡ªå·±å¼„çš„ï¼Œçµ„å®Œé‚„è »æœ‰æˆå°±æ„Ÿçš„ã€‚å…©å¹´å‰çµ„å¥½(é¡¯å¡äºŒæ‰‹+ç·šæ+æ²¿ç”¨èˆŠå‚³çµ±ç¡¬ç¢Ÿ)ç¸½èŠ±è²»å¤§æ¦‚ç‚º30000å‡ºé ­ï¼Œæ˜¯éå¸¸è²´çš„ä¸€æ ¼åƒ¹æ ¼ï¼Œæˆ‘æŠŠå¯¦ç¿’è³ºçš„éŒ¢å…¨éƒ¨éƒ½ç ¸åœ¨é€™å°é›»è…¦ä¸Šï¼Œè¦çµ„itxå¾ˆå¤šæ±è¥¿éƒ½æ˜¯è¦è²·ç‰¹å®šè¦æ ¼çš„ï¼Œèƒ½çœéŒ¢çš„åœ°æ–¹ä¸å¤šï¼Œè€Œä¸”é›»è…¦é€šå¸¸ä¸€çµ„å°±å¥½å¹¾å¹´ï¼Œå¯ä»¥è²·åƒ¹æ ¼åˆç†ï¼Œå“è³ªè€ç”¨çš„ç”¢å“ã€‚\n CPU AMD Ryzenâ„¢ 5 3600 ä¸»æ©Ÿæ¿ ROG STRIX X470-I GAMING è¨˜æ†¶é«” Micron Ballistix Sport LT 3200 8G *2 é¡¯ç¤ºå¡ ROG-STRIX-GTX1060-O6G-GAMING é›»æº CORSAIR SF450 80Plus SSD PLEXTOR M9PeGn 1TB M.2 2280 PCIe SSD SSD WD Blueâ„¢ SN550 NVMeâ„¢ ç¡¬ç¢Ÿ HGST 7200RPM 750GB ç¡¬ç¢Ÿ TOSHIBA 5200RPM 500GB æ©Ÿæ®¼ K01 6.5L A4 æ•£ç†±å™¨ CRYORIG C7   å¾Œè¨˜  å¹³å¸¸å¾…æ©Ÿæº«åº¦å¤§æ¦‚40â„ƒå·¦å³ï¼ŒéŠæˆ²ä¸­çš„æº«åº¦åœ¨55â„ƒå°±æ²’æœ‰å†ä¸Šå»äº†ï¼Œå¯èƒ½å•Ÿå‹•ä»€éº¼ä¿è­·æ©Ÿåˆ¶ä¹‹é¡çš„å§ï¼Œå¾Œé¢çš„æ•£ç†±é‚„æ˜¯å¤ªå·®äº†ï¼ŒCPUã€GPUå…©é ­ç‡’ã€‚\n","date":"2021-12-21T09:41:12+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/20211220_sn550%E9%96%8B%E7%AE%B1.md/","title":"WD Blueâ„¢ SN550 å°é–‹ç®±"},{"content":" å–å¾—ç£ç¢Ÿç‹€æ…‹  å·¥ä½œä¸Šç¸½æ˜¯ä¸€å †é³¥äº‹ï¼Œåœ¨ç”²æ–¹è£¡å·¥ä½œæœ‰æ™‚å€™åˆè¦è™•ç†ä¸€äº›å®Œå…¨æ²’æœ‰æ„ç¾©çš„é›œäº‹ï¼Œæµªè²»æ™‚é–“ã€‚\nç¸½ä¹‹å› ç‚ºä¸æ˜åŸå› ï¼Œæˆ‘éœ€è¦æ¯é€±ç´€éŒ„ä¸»æ©Ÿçš„ç£ç¢Ÿå‰©é¤˜å®¹é‡ç™¾åˆ†æ¯”\u0026hellip;\nè¦å–å¾—ç£ç¢Ÿè¨Šæ¯å¾ˆç°¡å–®ï¼Œä½¿ç”¨System.IOçš„DriveInfo.GetDrives()å¯ä»¥å–å¾—æ‰€æœ‰ç£ç¢Ÿï¼Œå†æŠŠDriveInfoçš„å±¬æ€§å–å‡ºä¾†\nstring diskStatus = \u0026#34;\u0026#34;; DriveInfo[] allDrives = DriveInfo.GetDrives(); foreach (DriveInfo d in allDrives) { if (d.IsReady == true)//ç¢ºå®šç£ç¢Ÿå°±ç·’  { int freePercent = (int)(d.TotalFreeSpace / (float)d.TotalSize * 100); diskStatus += $\u0026#34; {d.Name}{freePercent} \u0026#34; } }  å¯«å…¥ç´€éŒ„(éæ™‚ï¼Œæ”¹ç”±Mailç™¼é€)  é€™é‚Šä¸€åˆ‡ä»¥ç°¡å–®ç‚ºä¸»ï¼Œç›´æ¥ç”¨å¯«å…¥æ–‡å­—æª”çš„æ–¹å¼ä¾†é€²è¡Œ\n//å¦‚æœæœ‰é¡å¤–è¼¸å…¥æª”æ¡ˆè·¯å¾‘çš„è©±ï¼Œå°±æŠŠç¬¬ä¸€å€‹åƒæ•¸ç•¶ä½œè·¯å¾‘ï¼Œæ²’æœ‰å°±ä¸Ÿåœ¨æ¡Œé¢ //è‹¥ä¸æƒ³åœ¨æ’ç¨‹å™¨é‚£è£¡è¨­å®šé–‹å§‹ä½ç½®çš„è©±ï¼Œå°±ç”¨çµ•å°è·¯å¾‘å§ã€‚ string path = args.Length == 1 ? args[0] : \u0026#34;DiskLog.txt\u0026#34;; //è¨˜éŒ„æ™‚é–“ string now = DateRime.Now.ToString(\u0026#34;yyyy/MM/dd HH:mm:ss\u0026#34;); using StreamWriter file = new (path, append: true); file.WriteLine($\u0026#34;{now}\u0026gt;\u0026gt; {diskStatus}\u0026#34;);  æ–°å¢æ’ç¨‹  é€™é‚ŠåŸºæœ¬å°±é»é»æ»‘é¼ å°±æå®šäº†\né›»è…¦ç®¡ç† \u0026raquo; å·¥ä½œæ’ç¨‹å™¨ \u0026raquo; å»ºç«‹å·¥ä½œ\nè¼¸å…¥åç¨±\nè§¸ç™¼ç¨‹åº \u0026raquo; æ–°å¢ \u0026raquo; æ¯é€±\nå‹•ä½œ \u0026raquo; æ–°å¢ \u0026raquo; ç¨‹å¼æˆ–æŒ‡ä»¤ç¢¼(é¸æ“‡æˆ‘å€‘ç¨‹å¼çš„exeæª”) \u0026raquo; æ–°å¢å¼•æ•¸(è¼¸å…¥æª”æ¡ˆè·¯å¾‘) \u0026raquo; é–‹å§‹ä½ç½®(é è¨­ç‚ºC:\\WINDOWS\\System32)\n åŠ ä¸ŠéŒ¯èª¤è™•ç†  æ²’ä»€éº¼æ„å¤–æ˜¯ä¸æœƒéŒ¯å•¦ï¼Œä½†ç¸½æ˜¯æœ‰æ„å¤–XDï¼ŒåŠ å€‹try..catchè™•ç†å°±å¥½ï¼Œæœ€å¾Œå¤§æ¦‚å¦‚ä¸‹ã€‚\ntry { string diskStatus = \u0026#34;\u0026#34;; DriveInfo[] allDrives = DriveInfo.GetDrives(); foreach (DriveInfo d in allDrives) { if (d.IsReady == true)//ç¢ºå®šç£ç¢Ÿå°±ç·’  { int freePercent = (int)(d.TotalFreeSpace / (float)d.TotalSize * 100); diskStatus += $\u0026#34; {d.Name}{freePercent} \u0026#34; } } //å¦‚æœæœ‰é¡å¤–è¼¸å…¥æª”æ¡ˆè·¯å¾‘çš„è©±ï¼Œå°±æŠŠç¬¬ä¸€å€‹åƒæ•¸ç•¶ä½œè·¯å¾‘ï¼Œæ²’æœ‰å°±ä¸Ÿåœ¨æ¡Œé¢  //è‹¥ä¸æƒ³åœ¨æ’ç¨‹å™¨é‚£è£¡è¨­å®šé–‹å§‹ä½ç½®çš„è©±ï¼Œå°±ç”¨çµ•å°è·¯å¾‘å§ã€‚  string path = args.Length == 1 ? args[0] : \u0026#34;DiskLog.txt\u0026#34;; //è¨˜éŒ„æ™‚é–“  string now = DateRime.Now.ToString(\u0026#34;yyyy/MM/dd HH:mm:ss\u0026#34;); using StreamWriter file = new (path, append: true); file.WriteLine($\u0026#34;{now}\u0026gt;\u0026gt; {diskStatus}\u0026#34;); } catch(Exception ex) { Console.WriteLine(ex); Console.ReadKey();//å¡å€‹ç•«é¢ }  å–å¾—IPèˆ‡ç™¼é€Emailæœå‹™(æ›´æ–°)  å–å¾—æœ¬æ©ŸIPä½ç½®\nstring ip = Dns.GetHostEntry(Dns.GetHostName()).AddressList .Where(q =\u0026gt; q.AddressFamily == System.Net.Sockets.AddressFamily.InterNetwork) .FirstOrDefault().ToString(); ç™¼é€Mail\nprivate static void SendMail(string now, string ip, string diskStatus) { MailMessage mailMsg = new MailMessage(); mailMsg.Subject = $\u0026#34;{ip} \u0026gt;\u0026gt; {dickStatus}\u0026#34;; //ä¸»æ—¨  mailMsg.To.Add(new MailAddress(\u0026#34;xxx@gmail.com\u0026#34;));//æ”¶ä»¶äººåœ°å€  mailMsg.From = new MailAddress(\u0026#34;ooo@gmail.com\u0026#34;, \u0026#34;ä¸»æ©Ÿç´€éŒ„æ©Ÿå™¨äºº\u0026#34;);//å¯„ä»¶äººåœ°å€  mailMsg.Body = $\u0026#34;{ip} \u0026gt;\u0026gt; {dickStatus}\u0026#34;; //å…§æ–‡  //è¨­å®šmail server  SmtpClient client = new SmtpClient(); client.Credentials = new System.Net.NetworkCredential(\u0026#34;XXX@gmail.com\u0026#34;, \u0026#34;****\u0026#34;); //é€™è£¡è¦å¡«æ­£ç¢ºçš„å¸³è™Ÿè·Ÿå¯†ç¢¼  client.Host = \u0026#34;smtp.gmail.com\u0026#34;; //è¨­å®šsmtp Server  client.Port = 25; //è¨­å®šPort  client.EnableSsl = true; //gmailé è¨­é–‹å•Ÿé©—è­‰  client.Send(mailMsg); //å¯„å‡ºä¿¡ä»¶  client.Dispose(); }  åƒè€ƒ  https://docs.microsoft.com/zh-tw/dotnet/api/system.io.driveinfo.getdrives?view=net-6.0\nhttps://ithelp.ithome.com.tw/articles/10190120\n","date":"2021-12-17T17:09:56+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/20211217_windows%E6%8E%92%E7%A8%8B%E7%B4%80%E9%8C%84%E4%B8%BB%E6%A9%9F%E7%A3%81%E7%A2%9F%E7%8B%80%E6%85%8B.md/","title":"windowsæ’ç¨‹ç´€éŒ„ä¸»æ©Ÿç£ç¢Ÿç‹€æ…‹"},{"content":" Application Layer  æ³¨é‡æ–¼å•†æ¥­éœ€æ±‚è€Œä¸æ˜¯å¯¦ä½œä¸€äº›å¤–éƒ¨ç³»çµ±çš„æ±è¥¿ï¼ŒDBä¹‹é¡çš„ã€‚\nåœ¨é€™ä¸€å±¤è£¡æœ‰ä¸‰å€‹ä¸»è¦çš„è³‡æ–™å¤¾Contractsã€Featuresã€Behaviorsï¼Œåˆ†åˆ¥ç‚ºå­˜æ”¾æœå‹™ä»‹é¢ã€Use caseã€é©—è­‰ç”¨æˆ¶è¡Œç‚ºã€‚\nä¸»è¦åœ¨æ–¼Feturesï¼Œæ ¹æ“šDDDä¸¦ä½¿ç”¨MediatRç‚ºæ¯ä¸€å€‹éœ€æ±‚åšç¨è‡ªçš„CQRSæ“ä½œï¼Œ\n Contracts  å­˜æ”¾å„Servicesçš„interfaceçš„åœ°æ–¹\nPersistence é€šç”¨çš„éåŒæ­¥Repositoryä»‹é¢(Asynchronous Generic Repository)\nè£¡é¢åŒ…å«å¸¸ç”¨çš„åŠŸèƒ½ã€‚\n//æ³›å‹Tå¿…éœ€ç¹¼æ‰¿Domina Layerçš„EntityBase(Idã€createdByã€createDateã€LastModifiedDateç­‰ç­‰çš„æ±è¥¿) public interface IAsyncRepository\u0026lt;T\u0026gt; where T : EntityBase { Task\u0026lt;IReadOnlyList\u0026lt;T\u0026gt;\u0026gt; GetAllAsync(); Task\u0026lt;IReadOnlyList\u0026lt;T\u0026gt;\u0026gt; GetAsync(Expression\u0026lt;Func\u0026lt;T, bool\u0026gt;\u0026gt; predicate); Task\u0026lt;IReadOnlyList\u0026lt;T\u0026gt;\u0026gt; GetAsync(Expression\u0026lt;Func\u0026lt;T, bool\u0026gt;\u0026gt; predicate = null, Func\u0026lt;IQueryable\u0026lt;T\u0026gt;, IOrderedQueryable\u0026lt;T\u0026gt;\u0026gt; orderBy = null, string includeString = null, bool disableTracking = true); Task\u0026lt;IReadOnlyList\u0026lt;T\u0026gt;\u0026gt; GetAsync(Expression\u0026lt;Func\u0026lt;T, bool\u0026gt;\u0026gt; predicate = null, Func\u0026lt;IQueryable\u0026lt;T\u0026gt;, IOrderedQueryable\u0026lt;T\u0026gt;\u0026gt; orderBy = null, List\u0026lt;Expression\u0026lt;Func\u0026lt;T, object\u0026gt;\u0026gt;\u0026gt; includes = null, bool disableTracking = true); Task\u0026lt;T\u0026gt; GetByIdAsync(int id); Task\u0026lt;T\u0026gt; AddAsync(T entity); Task UpdateAsync(T entity); Task DeleteAsync(T entity); } ä¸‹è¨‚å–®Repositoryä»‹é¢ï¼Œåœ¨é€™é‚Šæˆ‘å€‘å¯ä»¥å»ºç«‹è‡ªå·±çš„æ–¹æ³•ã€åŠŸèƒ½ï¼Œå¾Œé¢è™•ç†Requestæ™‚æœƒç”¨åˆ°ã€‚\npublic interface IOrderRepository : IAsyncRepository\u0026lt;Order\u0026gt;//Orderä¾†è‡ªDomian Layerçš„Entity { Task\u0026lt;IEnumerable\u0026lt;Order\u0026gt;\u0026gt; GetOrdersByUserName(string userName); } Infrastructure Emailç™¼é€æœå‹™ä»‹é¢ï¼ŒEmail classå»ºç«‹åœ¨Models/Email.cs\npublic interface IEmailService { Task\u0026lt;bool\u0026gt; SendEmail(Email email); }  Features  å­˜æ”¾Use caseï¼Œç›®å‰åªæœ‰Ordersä¸€å€‹Use caseï¼Œä¸¦å¯¦ä½œCQRSã€‚\nå»ºè³‡æ–™å¤¾ Features/Orders/Commands Features/Orders/Queries\nQueriesåªæœ‰ä¸€å€‹æ–¹æ³•ï¼ŒGetOrderListã€‚\nCommandsè£¡é¢æœ‰ä¸‰å€‹æ–¹æ³•ï¼ŒCheckOrderã€UpdateOrderã€DeleteOrderã€‚\nQueries/GetOrderList å…ˆè™•ç†Queries\nFeatures/Orders/Queries/GetOrdersList/GetOrdersListQuery.cs Features/Orders/Queries/GetOrdersList/GetOrdersListQueryHandler.cs Features/Orders/Queries/GetOrdersList/OrdersVm.cs\nGetOrdersListQuery IRequestä»‹é¢ä¾†è‡ªæ–¼MediatR DI Versionï¼Œè£¡é¢List\u0026lt;OrdersVm\u0026gt;ä»£è¡¨è¦å›å‚³çš„type\nusing MediatR; public class GetOrdersListQuery : IRequest\u0026lt;List\u0026lt;OrdersVm\u0026gt;\u0026gt; { public string UserName { get; set; } public GetOrdersListQuery(string userName) { UserName = userName ?? throw new ArgumentNullException(nameof(userName)); } } GetOrdersListQueryHandler ç•¶Queryè¢«è§¸ç™¼æ™‚Handleræœƒè² è²¬è™•ç†ï¼Œå¯¦ä½œIRequestHandleræœƒå¾—åˆ°Handleé€™å€‹Functionï¼Œä¸¦å¯«å…¥æˆ‘å€‘è¦é€²è¡Œçš„æ“ä½œ\n//IRequestHandler\u0026lt;è¦è™•ç†çš„IRequest, è¼¸å‡ºçš„type\u0026gt; public class GetOrdersListQueryHandler : IRequestHandler\u0026lt;GetOrdersListQuery, List\u0026lt;OrdersVm\u0026gt;\u0026gt; { private readonly IOrderRepository _orderRepository; private readonly IMapper _mapper; //ä½¿ç”¨åœ¨Contractè£¡é¢å¯«çš„orderRepository  public GetOrdersListQueryHandler(IOrderRepository orderRepository, IMapper mapper) { _orderRepository = orderRepository; _mapper = mapper; } public async Task\u0026lt;List\u0026lt;OrdersVm\u0026gt;\u0026gt; Handle(GetOrdersListQuery request, CancellationToken cancellationToken) { var orderList = await _orderRepository.GetOrdersByUserName(request.UserName); return _mapper.Map\u0026lt;List\u0026lt;OrdersVm\u0026gt;\u0026gt;(orderList); } } OrdersVm å¯ä»¥çœ‹åˆ°é€™å€‹classæ˜¯æ”¾åœ¨Queries/GetOrdersListè£¡é¢ï¼Œåªçµ¦GetOrdersListé€™å€‹Use Caseç”¨ï¼Œèˆ‡Entityå±¤çš„Order.csç„¡é—œï¼Œé›–ç„¶ä»–å€‘é•·å¾—ä¸€æ¨£ã€‚\npublic class OrdersVm { public int Id { get; set; } public string UserName { get; set; } public decimal TotalPrice { get; set; } // BillingAddress  public string FirstName { get; set; } public string LastName { get; set; } public string EmailAddress { get; set; } public string AddressLine { get; set; } public string Country { get; set; } public string State { get; set; } public string ZipCode { get; set; } // Payment  public string CardName { get; set; } public string CardNumber { get; set; } public string Expiration { get; set; } public string CVV { get; set; } public int PaymentMethod { get; set; } } Commands/CheckoutOrder æ¥ä¸‹ä¾†è¦è™•ç†Commandçš„éƒ¨åˆ†\nå…ˆè™•ç†CheckoutOrder\n//Features/Orders/Commands/CheckoutOrder/CheckoutOrderCommand.cs //å›å‚³intè¨‚å–®ç·¨è™Ÿ public class CheckoutOrderCommand : IRequest\u0026lt;int\u0026gt; { public string UserName { get; set; } public decimal TotalPrice { get; set; } // BillingAddress  public string FirstName { get; set; } public string LastName { get; set; } public string EmailAddress { get; set; } public string AddressLine { get; set; } public string Country { get; set; } public string State { get; set; } public string ZipCode { get; set; } // Payment  public string CardName { get; set; } public string CardNumber { get; set; } public string Expiration { get; set; } public string CVV { get; set; } public int PaymentMethod { get; set; } } ä¸€æ¨£ä½¿ç”¨MediatRçš„åŠŸèƒ½ï¼Œé€éhandlerä¾†è™•ç†\n//Features/Orders/Commands/CheckoutOrder/CheckoutOrderCommandHandler.cs public class CheckoutOrderCommandHandler : IRequestHandler\u0026lt;CheckoutOrderCommand, int\u0026gt; { private readonly IOrderRepository _orderRepository; private readonly IMapper _mapper; //Applicationå±¤ä¸‹çš„mappings  private readonly IEmailService _emailService;//Applicationå±¤ä¸‹çš„contracts/infastucture  private readonly ILogger\u0026lt;CheckoutOrderCommandHandler\u0026gt; _logger; //ä¾è³´æ³¨å…¥éœ€è¦çš„å…ƒä»¶  public CheckoutOrderCommandHandler(IOrderRepository orderRepository, IMapper mapper, IEmailService emailService, ILogger\u0026lt;CheckoutOrderCommandHandler\u0026gt; logger) { _orderRepository = orderRepository ?? throw new ArgumentNullException(nameof(orderRepository)); _mapper = mapper ?? throw new ArgumentNullException(nameof(mapper)); _emailService = emailService ?? throw new ArgumentNullException(nameof(emailService)); _logger = logger ?? throw new ArgumentNullException(nameof(logger)); } //å¯¦ä½œIRequestHandler  public async Task\u0026lt;int\u0026gt; Handle(CheckoutOrderCommand request, CancellationToken cancellationToken) { var orderEntity = _mapper.Map\u0026lt;Order\u0026gt;(request); var newOrder = await _orderRepository.AddAsync(orderEntity); _logger.LogInformation($\u0026#34;è¨‚å–®{newOrder.Id}å»ºç«‹æˆåŠŸ\u0026#34;); await SendMail(newOrder); return newOrder.Id; } private async Task SendMail(Order order) { var email = new Email() { To = \u0026#34;test@gmail.com\u0026#34;, Body = $\u0026#34;Order was created.\u0026#34;, Subject = \u0026#34;Order was created\u0026#34; }; try { await _emailService.SendEmail(email); } catch (Exception ex) { _logger.LogError($\u0026#34;è¨‚å–®{order.Id}ç™¼ç”ŸéŒ¯èª¤ï¼Œmail service: {ex.Message}\u0026#34;); } } } æœ€å¾ŒæœƒåŠ ä¸Šä¸€å€‹é©—è­‰ï¼Œåœ¨Behaviorsé‚£é‚ŠåŠ å…¥ã€‚\nusing FluentValidation;//ä½¿ç”¨é©—è­‰å¥—ä»¶ public class CheckoutOrderCommandValidator : AbstractValidator\u0026lt;CheckoutOrderCommand\u0026gt; { public CheckoutOrderCommandValidator() { //pä»£è¡¨property  RuleFor(p =\u0026gt; p.UserName)//é©—è­‰UserName  .NotEmpty().WithMessage(\u0026#34;UserName å¿…å¡«\u0026#34;)//ä¸å¯ç‚ºç©ºå€¼ï¼Œè‹¥ç‚ºç©ºå€¼å›å‚³è¨Šæ¯  .NotNull() .MaximumLength(50).WithMessage(\u0026#34;UserName å­—æ•¸éé•·\u0026#34;); RuleFor(p =\u0026gt; p.EmailAddress) .NotEmpty().WithMessage(\u0026#34;EmailAddress å¿…å¡«\u0026#34;); RuleFor(p =\u0026gt; p.TotalPrice) .NotEmpty().WithMessage(\u0026#34;TotalPrice å¿…å¡«\u0026#34;) .GreaterThan(0).WithMessage(\u0026#34;TotalPrice éœ€è¦å¤§æ–¼0\u0026#34;); } } Commands/DeleteOrder UpdateOrderã€DeleteOrderåŸºæœ¬èˆ‡CheckoutOrderé¡ä¼¼ï¼Œä¸éæœ‰å¹¾å€‹åœ°æ–¹ä¸å¤ªä¸€æ¨£ã€‚\nCommandåªéœ€è¦IRequestï¼Œä¸éœ€ç”¨æ³›å‹ã€‚\npublic class DeleteOrderCommand : IRequest { public int Id { get; set; } } å¦‚æœCommandæœ¬èº«æ²’æœ‰è¦å›å‚³å€¼çš„è©±ï¼Œå°±å›å‚³Unit.Valueçµ¦MediatRçŸ¥é“\npublic async Task\u0026lt;Unit\u0026gt; Handle(DeleteOrderCommand request, CancellationToken cancellationToken) { var orderToDelete = await _orderRepository.GetByIdAsync(request.Id); if(orderToDelete == null) { throw new Exception($\u0026#34;æ‰¾ä¸åˆ°è¨‚å–®{request.Id}\u0026#34;); } await _orderRepository.DeleteAsync(orderToDelete); _logger.LogInformation($\u0026#34;è¨‚å–®{request.Id}åˆªé™¤å®Œæˆ\u0026#34;); return Unit.Value;//å¦‚æœCommandæœ¬èº«æ²’æœ‰è¦å›å‚³å€¼çš„è©±ï¼Œå°±å›å‚³Unit.Valueçµ¦MediatRçŸ¥é“ }  Behaviors  æˆ‘å€‘æœƒåœ¨Handlerå‰å¾Œé€²è¡Œé©—è­‰Userä½¿ç”¨çš„è¡Œç‚º(è¼¸å…¥)æ˜¯å¦æ­£å¸¸\næ•´å€‹æµç¨‹å¤§æ¦‚å¦‚ä¸‹\nCaller \u0026raquo; Request \u0026raquo; å‰è™•ç† \u0026raquo; Handler \u0026raquo; å¾Œè™•ç†\n//å¯¦ä½œMediatRæä¾›çš„IPipelineBehaviorä¾†è¨»å†Šå‰ã€å¾Œè™•ç† public class ValidationBehaviour\u0026lt;TRequest, TResponse\u0026gt; : IPipelineBehavior\u0026lt;TRequest, TResponse\u0026gt; { //é€™å°‡æœƒè®€å–æ‰€æœ‰Validatorï¼Œåªè¦æœ‰ç¹¼æ‰¿AbstractValidator\u0026lt;TRequest\u0026gt;(ä¾†è‡ªFluentValidation)  private readonly IEnumerable\u0026lt;IValidator\u0026lt;TRequest\u0026gt;\u0026gt; _validators; public ValidationBehaviour(IEnumerable\u0026lt;IValidator\u0026lt;TRequest\u0026gt;\u0026gt; validators) { _validators = validators; } public async Task\u0026lt;TResponse\u0026gt; Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate\u0026lt;TResponse\u0026gt; next) { if (_validators.Any())//å¦‚æœæœ‰Validatorçš„è©±  { //é©—è­‰è¼¸å…¥  var context = new ValidationContext\u0026lt;TRequest\u0026gt;(request); //ç­‰å¾…æ‰€æœ‰éåŒæ­¥åŸ·è¡Œçµæœ ( å°æ‰€æœ‰é©—è­‰é …ç›®é€²è¡ŒéåŒæ­¥å·¥ä½œ )  var validationResults = await Task.WhenAll(_validators.Select(v =\u0026gt; v.ValidateAsync(context, cancellationToken))); //æŸ¥çœ‹çµæœ  var failures = validationResults.SelectMany(r =\u0026gt; r.Errors).Where(f =\u0026gt; f != null).ToList(); //å¦‚æœæœ‰éŒ¯çš„è©±  if (failures.Count != 0) { throw new ValidationException(failures); } } //å‰è™•ç†çš„éƒ¨ä»½åˆ°æ­¤çµæŸ  var response = await next();//Handlerè™•ç†å®Œå›å‚³  //å¾Œè™•ç†çš„éƒ¨åˆ†å¾æ­¤é–‹å§‹  //....  //å¾Œè™•ç†çµæŸ  return response;//å›å‚³å›æ‡‰çµæœ  } }  DI Service Collection  å› ç‚ºä½¿ç”¨çš„æœå‹™æœ‰é»å¤šï¼ŒæŠŠä»–å€‘é›†ä¸­ç®¡ç†æˆä¸€å€‹Service Collectionï¼Œä¹‹å¾Œç›´æ¥è¨»å†Šé€™å€‹Collectionå°±å¥½äº†ã€‚\npublic static class ApplicationServiceRegistration { public static IServiceCollection AddApplicationServices(this IServiceCollection services) { services.AddAutoMapper(Assembly.GetExecutingAssembly()); services.AddValidatorsFromAssembly(Assembly.GetExecutingAssembly()); services.AddMediatR(Assembly.GetExecutingAssembly()); services.AddTransient(typeof(IPipelineBehavior\u0026lt;,\u0026gt;), typeof(UnhandledExceptionBehaviour\u0026lt;,\u0026gt;)); services.AddTransient(typeof(IPipelineBehavior\u0026lt;,\u0026gt;), typeof(ValidationBehaviour\u0026lt;,\u0026gt;)); return services; } } åˆ°é€™é‚ŠApplication Layerå°±åˆ°ä¸€æ®µè½äº†ï¼Œå¯¦åœ¨å¾ˆå¤šå¾ˆé•·ï¼Œä¸»è¦å¯¦ä½œäº†CQRSèˆ‡å­¸ç¿’MediatRçš„æ“ä½œï¼Œä¹Ÿæ›´çœ‹æ¸…æ¥šæ•´å€‹ç°¡æ½”æ¶æ§‹çš„è¨­è¨ˆã€‚\n åƒè€ƒ  ç°¡æ½”æ¶æ§‹ Application Layer\nç°¡æ½”æ¶æ§‹ Infrastructure Layer\nhttps://www.udemy.com/course/microservices-architecture-and-implementation-on-dotnet/\n","date":"2021-12-17T11:44:52+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/20211217_%E7%B0%A1%E6%BD%94%E6%9E%B6%E6%A7%8Bapplication.md/","title":"ç°¡æ½”æ¶æ§‹ Application Layer"},{"content":" ç­†è¨˜  é›–èªªåœ¨å·¥ä½œä¸Šèƒ½ä¸ç”¨ç¬¬ä¸‰æ–¹å¥—ä»¶å°±ä¸ç”¨ï¼Œä½†ç·´ç¿’çš„æ™‚å€™æƒ³åšä»€éº¼å°±åšä»€éº¼å§ï¼Œä¸€åˆ‡è¼•é¬†ã€ç°¡å–®æœ€å¥½äº†ã€‚å¯ä»¥è€ƒæ…®ç”¨çœ‹çœ‹ã€‚\nç´€éŒ„ä¸€ä¸‹å¸¸ç”¨çš„åŠŸèƒ½ï¼Œç¯„ä¾‹å–è‡ªè¨‚å–®çµå¸³å‰è™•ç†çš„éƒ¨åˆ†ã€‚\nusing FluentValidation;//ä½¿ç”¨å¥—ä»¶ public class CheckoutOrderCommandValidator : AbstractValidator\u0026lt;CheckoutOrderCommand\u0026gt;//è¦é©—è­‰çš„class { public CheckoutOrderCommandValidator() { //pä»£è¡¨property  RuleFor(p =\u0026gt; p.UserName)//é©—è­‰UserName  .NotEmpty().WithMessage(\u0026#34;UserName å¿…å¡«\u0026#34;)//ä¸å¯ç‚ºç©ºå€¼ï¼Œè‹¥ç‚ºç©ºå€¼å›å‚³è¨Šæ¯  .NotNull() .MaximumLength(50).WithMessage(\u0026#34;UserName å­—æ•¸éé•·\u0026#34;); RuleFor(p =\u0026gt; p.EmailAddress) .NotEmpty().WithMessage(\u0026#34;EmailAddress å¿…å¡«\u0026#34;); RuleFor(p =\u0026gt; p.TotalPrice) .NotEmpty().WithMessage(\u0026#34;TotalPrice å¿…å¡«\u0026#34;) .GreaterThan(0).WithMessage(\u0026#34;TotalPrice éœ€è¦å¤§æ–¼0\u0026#34;); } } å–å¾—å„å€‹Validator\n//é€™å°‡æœƒè®€å–æ‰€æœ‰Validatorï¼Œåªè¦æœ‰ç¹¼æ‰¿AbstractValidator\u0026lt;TRequest\u0026gt;(ä¾†è‡ªFluentValidation) private readonly IEnumerable\u0026lt;IValidator\u0026lt;TRequest\u0026gt;\u0026gt; _validators; public ValidationBehaviour(IEnumerable\u0026lt;IValidator\u0026lt;TRequest\u0026gt;\u0026gt; validators) { _validators = validators; } ä½¿ç”¨Validator\nif (_validators.Any())//å¦‚æœæœ‰Validatorçš„è©± { //é©—è­‰è¼¸å…¥  var context = new ValidationContext\u0026lt;TRequest\u0026gt;(request); //ç­‰å¾…æ‰€æœ‰éåŒæ­¥åŸ·è¡Œçµæœ ( å°æ‰€æœ‰é©—è­‰é …ç›®é€²è¡ŒéåŒæ­¥å·¥ä½œ )  var validationResults = await Task.WhenAll(_validators.Select(v =\u0026gt; v.ValidateAsync(context, cancellationToken))); //æŸ¥çœ‹çµæœ  var failures = validationResults.SelectMany(r =\u0026gt; r.Errors).Where(f =\u0026gt; f != null).ToList(); //å¦‚æœæœ‰éŒ¯çš„è©±  if (failures.Count != 0) { throw new ValidationException(failures); } } ","date":"2021-12-16T14:50:26+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/20211216_fluentvalidation%E9%A9%97%E8%AD%89%E5%A5%97%E4%BB%B6.md/","title":"FluentValidation"},{"content":" æ¡ˆç™¼åŸå›   ä¸çŸ¥é“æœ‰å¤šä¹…æ²’æœ‰æ›´æ–°æˆ‘çš„Lineäº†ï¼Œä¹Ÿæ²’æœ‰ä»€éº¼å€¼å¾—æˆ‘æ›´æ–°çš„åŠŸèƒ½ï¼Œé€™æ¨£ç©©ç©©è‘—ç”¨å°±æŒºå¥½çš„ï¼Œæ—©ä¸Šæ”¶åˆ°LineéŒ¢åŒ…æé†’æˆ‘å¿…é ˆåœ¨12/31è™Ÿå‰æ›´æ–°åˆ°æœ€æ–°ç‰ˆï¼Œå¹³å¸¸å‡ºé–€å·²ç¶“å¾ˆç¿’æ…£Payä¾†Payå»äº†ï¼Œå¾—å¾ˆæ–¹ä¾¿ï¼Œæ‰€ä»¥åªèƒ½æ›´æ–°äº†ã€‚\nBOOM!\næ›´æ–°å®Œå¾ŒLineç›´æ¥é–ƒé€€ï¼Œå†ä¹Ÿæ‰“ä¸é–‹äº†ï¼Œå¸è¼‰é‡è£ã€é‡æ–°é–‹æ©Ÿéƒ½è©¦éäº†ï¼Œæ›´æ–°iOSåˆ°æœ€æ–°ç‰ˆæœ¬é‚„æ˜¯æ‰“ä¸é–‹ï¼Œåªå¥½å¯«emailçµ¦å®¢æœä¾†è™•ç†ï¼Œä¾†å›è™•ç†äº†å…©å¤©å·¦å³ï¼Œå®¢æœç™¼é€æ¶ˆæ¯çµ¦æˆ‘èªªä»–å€‘ä¿®æ­£äº†å•é¡Œï¼Œè«‹è‡³App Storeæ›´æ–°æœ€æ–°ç‰ˆï¼Œé€™æ¬¡æ›´æ–°å®Œå¾Œçµ‚æ–¼å¯ä»¥ç™»å…¥äº†ï¼Œé‚„æ˜¯è¦çµ¦ä»–å€‘çš„å·¥ç¨‹å¸«é»è®šï¼Œé€™å€‹æ•ˆç‡ç®—å¾ˆå¿«äº†ã€‚\nBOOM!ANGIN!\nåŸä»¥ç‚ºäº‹æƒ…åˆ°é€™è£¡å°±å‘Šä¸€å€‹æ®µè½äº†ï¼Œæ²’æƒ³åˆ°æ›´æ–°å¾Œå°è‡´çš„å•é¡Œä¸€ä¸€æµ®ç¾ï¼Œå¹³å¸¸åœ¨ä½¿ç”¨çš„iPad 3å±…ç„¶é€£ä¸åˆ°æˆ‘æ‰‹æ©Ÿçš„ç†±é»äº†ï¼Œä¸€æŸ¥æ‰ç™¼ç¾iOS 15åŠ å¼·äº†wifiå­˜å–ä¿è­·(Wi-Fi Protected Access)ï¼Œå¾wpa2å‡ç´šåˆ°wpa3ï¼Œå°è‡´ä¸æ”¯æ´wpa3çš„è¨­å‚™å°‡ç„¡æ³•é€£æ¥ï¼Œè€Œæˆ‘çš„iPad 3å°±é€™æ¨£å†ä¹Ÿé€£ä¸ä¸Šç¶²è·¯äº†ã€‚æ›´æ…˜çš„æ˜¯ç¶²è·¯ä¸ŠæŸ¥äº†ä¸€è¼ªï¼Œé‚„æ˜¯æ²’æ‰¾åˆ°è§£æ±ºæ–¹æ³•ã€‚\nåªèƒ½ç¥ˆæ±‚ä¹‹å¾Œæœƒé–‹æ”¾å¯ä»¥æ”¹wpa2çš„é¸é …ï¼Œé›–ç„¶æˆ‘è¦ºå¾—å¾ˆé›£ã€‚._.\n","date":"2021-12-16T13:10:12+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/20211216_%E6%9B%B4%E6%96%B0%E5%BE%9E%E4%BE%86%E5%B0%B1%E6%B2%92%E6%9C%89%E5%A5%BD%E4%BA%8B.md/","title":"æ›´æ–°å¾ä¾†å°±æ²’æœ‰å¥½äº‹æƒ…"},{"content":" ç­†è¨˜  å·¥ä½œä¸Šå‰›å¥½é‡åˆ°ä¸€å€‹éœ€æ±‚ï¼Œè¦éæ¿¾ç”¨æˆ¶è¼¸å…¥çš„è‹±æ–‡ID\n åˆ¤æ–·è¦å‰‡\n æ ¼å¼é™å®šåŠå½¢å¤§å¯«è‹±æ–‡ ç¬¦è™Ÿåªèƒ½è¼¸å…¥.ã€-ã€/ã€\\é‚„æœ‰ç©ºç™½ é•·åº¦æœ€é•·ç‚º50å­—å…ƒ è‡³å°‘æœ‰ä¸‰å€‹è‹±æ–‡å­—ï¼Œä¸å¯åªæœ‰ç¬¦è™Ÿ   åŸæœ¬æ‰“ç®—å…ˆåˆ¤æ–·è¼¸å…¥çš„æ­£ç¢ºçš„è‹±æ–‡èˆ‡ç¬¦è™Ÿä¸”é•·åº¦ç‚º3~50ï¼Œåœ¨åˆ¤æ–·è‹±æ–‡å­—è‡³å°‘ä¸‰å€‹ã€‚\nusing System.Text.RegularExpressions; string EnglishName = \u0026#34;TEST-123\u0026#34;//user input Regex.IsMatch(EnglishName, \u0026#34;@^[A-Z//.\\\\\\s]{3,50}$\u0026#34;); Regex.IsMatch(EnglishName, \u0026#34;@^[A-Z{3,}$\u0026#34;); ä½¿ç”¨é æŸ¥ä¾†è™•ç†é€™å€‹å•é¡Œ\n  æ­£å‘è‚¯å®šé æŸ¥ (?=pattern) è¡¨ç¤ºå¾ç•¶å‰ä½ç½®é–‹å§‹ï¼Œé æ¸¬å¾Œé¢çš„æ–‡å­—å¿…é ˆåŒ¹é…ä¸Špattern æ­£å‘å¦å®šé æŸ¥ (?!pattern) è¡¨ç¤ºå¾ç•¶å‰ä½ç½®é–‹å§‹ï¼Œé æ¸¬å¾Œé¢çš„æ–‡å­—å¿…é ˆåŒ¹é…ä¸ä¸Špattern åå‘è‚¯å®šé æŸ¥ (?\u0026lt;=pattern) è¡¨ç¤ºå¾ç•¶å‰ä½ç½®é–‹å§‹ï¼Œé æ¸¬å‰é¢çš„æ–‡å­—å¿…é ˆåŒ¹é…ä¸Špattern åå‘å¦å®šé æŸ¥ (?\u0026lt;!pattern) è¡¨ç¤ºå¾ç•¶å‰ä½ç½®é–‹å§‹ï¼Œé æ¸¬å‰é¢çš„æ–‡å­—å¿…é ˆåŒ¹é…ä¸ä¸Špattern   æœ‰ä¸‰å€‹è‹±æ–‡å­—å¾Œï¼Œæ‰æœƒåˆ¤æ–·æ˜¯å¦ç‚ºé•·åº¦3~50ä¸”æ­£ç¢ºçš„è‹±æ–‡èˆ‡ç¬¦è™Ÿã€‚\nRegex.IsMatch(EnglishName, \u0026#34;@^(?=.*[A-Z].*[A-Z].*[A-Z])[A-Z//.\\\\\\s]{3,50}$\u0026#34;); æ¯æ¬¡è¦å¯«REéƒ½è¦æŸ¥ä¸€ä¸‹æ€éº¼å¯«XDï¼Œå¸Œæœ›æˆ‘ä¸‹æ¬¡ä¸è¦å†å¿˜è¨˜å•¦ã€‚\nåƒè€ƒ https://www.runoob.com/regexp/regexp-syntax.html https://blog.csdn.net/NAPO687/article/details/110198206\n","date":"2021-12-14T13:08:10+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/20211214_%E6%AD%A3%E5%89%87%E8%A1%A8%E9%81%94%E5%BC%8F.md/","title":"æ­£å‰‡è¡¨é”å¼ç­†è¨˜"},{"content":" ä»‹ç´¹  è‡ªå°æ™‚å€™æˆ‘å°±æ˜¯Halo(æœ€å¾Œä¸€æˆ°)ç³»åˆ—çš„éµæ¡¿ç²‰çµ²äº†ï¼Œåœ¨æœ€åˆä»£XBOXä¸Šé¢ä¸çŸ¥é“é‡ç ´äº†å¥½å¹¾éï¼Œé€™æ¬¾éŠæˆ²ä¹Ÿæ˜¯æˆ‘å”¯ä¸€æƒ³è¦è³¼è²·XBOXçš„ç†ç”±äº†ï¼Œéäº†è¶…ä¹…åˆ°äº†ç¾åœ¨ï¼ŒHaloä¹Ÿä¸å†æ˜¯XBOXç¨ä½”äº†(é™¤äº†Halo 5)ï¼Œå…¶ä»–ç‰ˆæœ¬çš†å·²ç¶“èƒ½åœ¨PCä¸ŠéŠç©ï¼Œå¦‚ä»ŠHalo Infiniteä¹Ÿæ­£å¼æ¨å‡ºï¼Œé€™æ¬¡éµäº†å¿ƒè²·äº†XGPUçš„æœƒå“¡ï¼Œä¸€æ¬¡å°±çµ¦ä»–åŒ…3å¹´ã€‚é€™ä¸‰å¹´å¾®è»Ÿè‡ªå®¶çš„éŠæˆ²éƒ½å¯ä»¥ç›´æ¥ç©çˆ†ï¼Œé‚„æœ‰EA PLAYå¯ä»¥ç©ï¼Œçµ•å°ç©ä¸å®Œçš„ã€‚ \rè¶•å›ä¾†çµæŸæˆ°é¬¥\r\n çœéŒ¢  ç¶²è·¯ä¸Šæœ‰å¾ˆå¤šæ•™ä½ æ€éº¼å„²XGPUæœ€åŠƒç®—ï¼Œä½†æ˜¯ç®—ä¸€ç®—éƒ½é‚„æ˜¯è¦å¹¾åƒå…ƒï¼Œå› ç‚ºå°ç£çš„XGPUåƒ¹æ ¼å¤ªé«˜äº†ï¼Œåœ‹å¤–å…¶ä»–åœ°å€çš„åƒ¹æ ¼å¯èƒ½æ¯”å°ç£ä¾¿å®œä¸Šä¸å°‘ï¼Œæ‰€ä»¥è‡ªè¡Œè·¨å€è³¼è²·æˆ–æ˜¯è«‹äººä»£å„²å¯èƒ½æ˜¯æœ€åˆ’ç®—çš„æ–¹æ¡ˆï¼Œä½†æ˜¯é€™äº›é¢¨éšªéƒ½æ¯”è¼ƒé«˜ï¼Œä½†æ˜¯æˆ‘æ‰“é–‹æ·˜å¯¶çœ‹åˆ°ä»£å„²3å¹´åªè¦118äººæ°‘å¹£ï¼ŒçœŸçš„æ˜¯å¤ªé¦™äº†ï¼Œç›´æ¥ç§’é€Ÿä¸‹è¨‚ï¼Œä½†ç™¼ç¾æ·˜å¯¶çš„è™›æ“¬ç‰©å“åªèƒ½é€éä¸­åœ‹çš„éŠ€è¡Œå¡ä¾†é€²è¡Œä»˜æ¬¾ï¼Œä¸æ”¯æŒæµ·å¤–åˆ·å¡ï¼Œæˆ–æ˜¯ç‰å±±ATMè½‰å¸³ï¼Œåªèƒ½å»è¦çš®æ‰¾ä»£ä»˜ï¼Œçœ‹äº†å¹¾å®¶éƒ½å·®ä¸å¤šéŒ¢ï¼Œå…¬é“åƒ¹æ‡‰è©²æ˜¯1:5.4å°å¹£ï¼Œæ›ç®—ä¸‹ä¾†æ·˜å¯¶ä»£å„²åªéœ€è¦å°å¹£637ï¼Œä¸€å¹´åªè¦200å‡ºé ­ï¼Œå¤ªåˆ’ç®—äº†ã€‚\n ä»£å„²  ä»£å„²æœ€å¥½ä½¿ç”¨å°è™Ÿä¸”è¦å…ˆæŠŠå¯†ç¢¼éš¨ä¾¿æ”¹æ‰ï¼Œå†çµ¦æ·˜å¯¶çš„åº—å®¶æ¯”è¼ƒå®‰å…¨ï¼Œåº—å®¶ç™»å…¥æ™‚æœƒå†è·Ÿä½ è¦ç™»å…¥å®‰å…¨ç¢¼ï¼Œæˆ‘ä¸ç¢ºå®šåº—å®¶æ˜¯å¦‚ä½•æŠŠæˆæœ¬å£“é‚£éº¼ä½çš„ï¼Œä¸éä»£å„²æ™‚æœƒçœ‹åˆ°è‡ªå·±çš„ä¿¡ç®±æ”¶åˆ°ä¾†è‡ªå¾®è»Ÿçš„æ—¥æ–‡ä¿¡ä»¶çš„ä»˜æ¬¾è¨Šæ¯ï¼Œæ‡‰è©²å®˜æ–¹çš„æ²’éŒ¯ï¼Œæœ€å¾Œè¨˜å¾—æŠŠå¯†ç¢¼æ”¹æ‰ã€‚ \rä»£å„²æ™‚æ”¶åˆ°çš„æ—¥æ–‡ä¿¡ä»¶\r\n è²ªå°ä¾¿å®œçš„ä¸‹å ´  æ²’æƒ³åˆ°éäº†åŠå¹´å¾Œï¼Œçªç„¶ç™¼ç¾è¢«åµæ¸¬åˆ°é•åXboxæ¢æ¬¾åŠæ¢ä»¶ï¼Œè¢«å–æ¶ˆè¨‚é–±å•¦QQï¼Œåªå¥½è¯ç¹«è³£å®¶é€€æ¬¾ï¼Œæ·˜å¯¶åº—é‹ªç›´æ¥å€’åº—æ‰¾ä¸åˆ°å•†åº—äº†ï¼Œä½†å¥½åœ¨è³£å®¶å®¢æœé‚„åœ¨ï¼Œä¹Ÿé¡˜æ„æŒ‰ç…§æ¯”ä¾‹é€€æ¬¾(é¡˜æ„é€€98.5RMB)ã€‚ éœ€è¦è¯ç¹«å®˜æ–¹å®¢æœç”³è«‹é–‹é€šé€€æ¬¾ï¼Œç¶“éå®˜æ–¹å®¢æœæ¼«é•·çš„è™•ç†(éš”å¤©æ—©ä¸Š)ï¼Œå†æ¬¡è¯ç¹«å®¢æœæ‰é–‹é€šæˆåŠŸï¼Œä¸€é–‹å§‹è©¢å•æ˜¯ä¸æ˜¯é€€åˆ°æˆ‘çš„æ”¯ä»˜å¯¶ï¼Œå®¢æœèªªæ˜¯ï¼Œçµéé€€å®Œç™¼ç¾æ˜¯é€€åˆ°ä»£ä»˜çš„äººé‚£é‚Šï¼ï¼ å»è¦çš®çœ‹ä¹Ÿç™¼ç¾ä»–å€’åº—äº†ï¼ŒèŠèŠäº”å¤©å‰ä¸Šç·šï¼Œå¸Œæœ›æ¸ºèŒ«ï¼²\n","date":"2021-12-13T17:25:11+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/20211211_xboxgamepass.md/","title":"XBOX Game Pass Ultimate"},{"content":" å¿ƒå¾—(å°é›·)  æ²’æƒ³åˆ°åˆ€åŠç¥åŸŸåˆå‡ºåŠ‡å ´ç‰ˆäº†ï¼Œæˆ‘å¥½èˆˆå¥®å•Š!!ä¸Šä¸€æ¬¡çœ‹åºåˆ—çˆ­æˆ°æˆ‘é‚„åœ¨é«˜é›„å¿µæ›¸ï¼Œç‰¹åˆ¥è·‘å»å¸‚å€è¶…é çš„é«˜é›„å¤§é ç™¾çœ‹4dxï¼Œé‚£æ¬¡ä¹Ÿæ˜¯æˆ‘ç¬¬ä¸€æ¬¡é«”é©—4dxçš„å¨åŠ›ï¼Œé‚£å€‹å‹•æ…‹åº§æ¤…è®“æˆ‘å®Œå…¨èå…¥åœ¨ç•«é¢è£¡é¢ï¼Œåˆ€åˆ€ç åœ¨èƒŒä¸Šçš„æ„Ÿè¦ºï¼Œåˆ€å‰Šçš„æ°£æµåœ¨è€³é‚Šå™´ç™¼ï¼Œæˆ‘ç¾åœ¨é‚„åœ¨æ¿€å‹•å•Šï¼ç¸½ä¹‹å°±æ˜¯å›ä¸å»äº†ï¼Œç•¶æ™‚å­¸ç”Ÿç¥¨å¥½åƒæ˜¯450é‚„500æœ‰é»å¿˜è¨˜äº†ï¼Œé€™å€‹åƒ¹éŒ¢å°æ–¼å­¸ç”Ÿçš„æˆ‘ä¹Ÿæ˜¯ä¸å°çš„é‡‘é¡ï¼Œä½†æˆ‘é‚„æ˜¯è¦ºå¾—è¶…å€¼å¾—ã€‚\né€™æ¬¡å»çœ‹çš„é›»å½±é™¢æ˜¯ä¿¡ç¾©å¨ç§€ï¼Œçœ‹äº†ä¸€ä¸‹ç¥¨åƒ¹åŸåƒ¹è¦550ï¼Œé€™å€‹ç¥¨åƒ¹ä¹Ÿä¸æ˜¯é¬§è‘—ç©çš„ï¼Œèº«ç‚ºåŠå€‹å®¢å®¶äººçš„æˆ‘ï¼Œç™¼ç¾è¦çš®ä¸Šé¢æœ‰åœ¨è³£å¨ç§€çš„æ‹›å¾…ç¥¨ä¸€å¼µ300å…ƒï¼Œè€Œä¸”å¯ä»¥çœ‹4dxï¼Œç«‹é¦¬ä¸‹å®šï¼Œç›¸è¦‹æ¨æ™šï¼Œå¤ªåˆ’ç®—äº†ã€‚\n\rç”¨æ‹›å¾…ç¥¨é€šå¸¸æ˜¯ä¸èƒ½æ‹¿ç‰¹å…¸çš„ï¼Œä½†æ˜¯åº—å“¡é‚„æ˜¯ç™¼çµ¦æˆ‘ï¼Œå°ç¢ºå¹¸XDã€‚\r\nåˆ€åŠç¥åŸŸProgressiveæ˜¯ä»¥äºçµ²å¨œä½œç‚ºæ•…äº‹ä¸»è§’å‡ºç™¼ï¼Œè¬›è¿°äº†é€²å…¥SAOçš„åŸå› åŠç¬¬ä¸€å±¤çš„æ•…äº‹ï¼Œæœ¬å‚³å¾Œé¢å‡ºäº†ä¸€å †éŠæˆ²ä½†é‚„æ˜¯æ²’æœ‰æ¯”SAOæ›´åˆºæ¿€å¥½çœ‹ï¼Œé€™å€‹å†·é£¯ï¼ŒçœŸé¦™ã€‚åŠ‡æƒ…é‚„æ˜¯æœ‰åšä¸€äº›ä¿®æ”¹èˆ‡æœ¬å‚³ä¸åŒï¼Œå¤šäº†ç±³ç‰¹é€™å€‹è§’è‰²ï¼Œå¥¹èˆ‡äºçµ²å¨œå¾æœ€å¥½çš„æœ‹å‹ï¼Œé‡åˆ°æ­»çµæ™‚é¸æ“‡é€€å‡ºéšŠä¼è‡ªå·±é›¢é–‹ï¼Œåˆ°æœ€å¾Œäº’ç›¸é«”è«’å’Œå¥½ï¼Œä¸¦èµ°ä¸Šå„è‡ªçš„é“è·¯ï¼Œå®Œç¾å‘¼æ‡‰ä¸»é¡Œæ›²ã€å‰è¡Œã€çš„æ­Œè©ã€‚\nä¸­é–“ä¸€å®šè¦åŠ ä¸Šæ¡è€çˆºå‡ºä¾†è£é€¼ï¼Œå¸¥æ°£æ”¶å‰²ä¸€æ³¢ï¼Œæ•´é«”ç•«é¢è·ŸéŸ³æ¨‚æˆ‘éƒ½å¾ˆæ»¿æ„ï¼Œå†åŠ ä¸Šå‹•æ…‹åº§æ¤…çš„åŠ æŒï¼Œæ»¿åˆ†10åˆ†æˆ‘çµ¦9.5åˆ†ï¼Œè¦æ˜¯èƒ½æœ‰60FPSé‚£å°±å®Œç¾äº†ï¼Œ2022å¹´ä¹Ÿè¦å‡ºå¦ä¸€éƒ¨åŠ‡å ´ç‰ˆï¼Œæ²’æ„å¤–ä¹Ÿè¦çœ‹4dx!\n","date":"2021-12-09T13:29:52+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/20211207_%E5%88%80%E5%8A%8D%E7%A5%9E%E5%9F%9Fprogressive.md/","title":"åˆ€åŠç¥åŸŸProgressive ç„¡æ˜Ÿå¤œçš„è© å˜†èª¿ åŠ‡å ´ç‰ˆ"},{"content":" å‰æƒ…æè¦  åœ¨éå»å­¸ç”Ÿæ™‚æœŸçš„æ™‚å€™å°±æ¥è§¸äº†è‚¡ç¥¨ï¼Œç¸½è¦ºå¾—è¦éŒ¢æ»¾éŒ¢æ‰èƒ½è²¡å¯Œè‡ªç”±ï¼ŒæŠŠæ‰“å·¥çš„éŒ¢éƒ½æ‹¿å»ç©çœ‹çœ‹ï¼Œç•¶æ™‚çš„é¸è‚¡ç­–ç•¥æ˜¯\n1.è‚¡åƒ¹å¤ ä½(å› ç‚ºæœ¬é‡‘å¤ªå°è²·ä¸èµ·å¤ªè²´çš„è‚¡ç¥¨ï¼Œæ¯ä¸€æ¬¡è²·è‚¡ç¥¨éƒ½æ˜¯All in)\n2.çœ‹èµ·ä¾†ç¾åœ¨åœ¨ä½æª”ï¼Œä½åˆ°ä¸èƒ½å†ä½çš„æ„Ÿè¦º\nç•¶æ™‚All inè²·äº†é™½æ˜4å¡Šå¤šé‚„5å¡Šï¼Œæ²’éå¹¾å¤©ä¸çŸ¥æ€éº¼å°±å™´åˆ°æ¼²åœï¼ŒæŠ“åˆ°ä¸€å€‹ä½è²·é«˜è³£çš„ç¯€å¥ï¼Œæ²’å¤šä¹…å°±æŠŠå®ƒå‡ºæ¸…äº†ï¼Œç²åˆ©4000$å¤šï¼Œå¾Œä¾†åˆè½æœ‹å‹å»ºè­°å»è²·å…‰å­¸é¡é ­è‚¡ç‰æ™¶å…‰ï¼Œä¹Ÿè³ºäº†å¥½å¹¾åƒï¼Œæˆ‘è©²ä¸æœƒå…¶å¯¦å¾ˆé©åˆç©è‚¡ç¥¨å§XDï¼Œç›´åˆ°æˆ‘è†è“‹ä¸­äº†ä¸€ç®­ï¼Œå—äºç§‘è³ 20000å…ƒï¼Œæ²’æƒ³åˆ°é‚£éº¼æ…˜ï¼Œä¹‹å¾Œå°±é€€å‡ºè‚¡æµ·äº†ã€‚\nç›´åˆ°ç¾åœ¨å…¨çƒè‚¡å¸‚ä¸€ç›´çªç ´æ–°é«˜ï¼Œä¸¦ä¸”å‡ºç¤¾æœƒé ˜è–ªæ°´çš„æ™‚å€™ï¼Œæˆ‘ï¼Œå†æ¬¡å›æ­¸ï¼ç­‰ç­‰é€™ä¸æœƒæ˜¯é«˜é»çš„è¨Šè™Ÿå§QQ\nå°äº†ï¼Œé€™é‚Šä¸åšä»»ä½•æŠ•è³‡å»ºè­°å–”ï¼Œå–®ç´”å¿ƒå¾—åˆ†äº«ã€‚\n å•Ÿè’™  é ˜äº†è–ªæ°´å¾Œï¼Œåªèƒ½èªªéŒ¢çœŸçš„è³ºï¼Œç¾åœ¨å¹´è¼•äººåŸºæœ¬ä¸Šæ²’ä»€éº¼å¸Œæœ›ï¼Œå…‰æ´»è‘—å°±å·²ç¶“è²»ç›¡å…¨åŠ›ï¼Œæ¯é€±40å°æ™‚çš„ç”Ÿå‘½è³£çµ¦å…¬å¸ï¼Œæ‰£æ‰åŸºæœ¬é–‹éŠ·ã€æˆ¿ç§Ÿã€ä¼™é£Ÿï¼Œå¯ä»¥èŠ±çš„éŒ¢ä¹Ÿå°±ä¸€è¬å¤šå§ï¼Œé‚„æ²’æœ‰ä»»ä½•å¨›æ¨‚ï¼Œæ´»è‘—ï¼Œå»åƒæ˜¯å€‹æ­»äººï¼Œä½†æƒ³åˆ°çˆ¶æ¯ç‚ºäº†æˆ‘ä¹ŸæŠŠè‡ªå·±çš„ç”Ÿå‘½è²©è³£çµ¦å…¬å¸ï¼Œåªç‚ºäº†èƒ½è®“æˆ‘æœ‰å¥½çš„ç”Ÿæ´»ï¼Œæˆ‘åˆæœ‰ä»€éº¼å¥½è—‰å£ä¸å»åŠªåŠ›å‘¢ï¼Ÿ\nçœ‹äº†ä¸€æœ¬é—œæ–¼ç†è²¡çš„æ›¸ç±ã€æˆ‘ç”¨æ­»è–ªæ°´è¼•é¬†ç†è²¡è³ºåƒè¬ã€ï¼Œè®“æˆ‘äº†è§£çš„è³‡ç”¢é…ç½®ã€å†å¹³è¡¡èˆ‡æŒ‡æ•¸æŠ•è³‡çš„åŸºæœ¬æ¦‚å¿µï¼Œæ›¸ä¸­çš„å…§å®¹éƒ½æ·ºé¡¯æ˜“æ‡‚ï¼Œæ²’æœ‰ä»€éº¼é›£ä»¥é›¢è§£çš„æ±è¥¿ã€‚ä¹‹å¾Œä¹Ÿçœ‹äº†ç¶²è·¯ä¸Šè¨±å¤šçš„æ–‡ç« èˆ‡å½±ç‰‡ï¼Œæ¸…æµå›ã€é­¯çˆ¸ã€ypç­†è¨˜ã€å¤šæ‹‰ç‹èˆ‡ä¼¯æ ¼é ­æŠ•è³‡æŒ‡å—ï¼Œéƒ½è®“æˆ‘å …ä¿¡æŒ‡æ•¸æŠ•è³‡æ˜¯å€‹GOOD SHIT~\n ä¼¯æ ¼é ­çš„æŠ•è³‡æŒ‡å—\n evelop a workable plan Invest early and ofter Never bear too much or too little risk Diversify Never try to time the market Use index funds when possible Keep costs low Minimize taxes Invest with simplicity Stay the course    é–‹æˆ¶æº–å‚™  ä¼¯æ ¼é ­çš„æŠ•è³‡æŒ‡å—ç¬¬7æ¢ï¼ŒKeep costs lowï¼Œç›¡å¯èƒ½åœ°æ¸›å°‘æŠ•è³‡æˆæœ¬ã€‚\næˆæœ¬æœ€ä½çš„æ‡‰è©²æ˜¯å°è‚¡å®šæœŸå®šé¡(æ–°å…‰è­‰åˆ¸20000å…§ï¼Œæ‰‹çºŒè²»1å…ƒ)\næµ·å¤–è¤‡å§”è¨—ç¾è‚¡(å¯Œé‚¦è­‰åˆ¸ï¼Œ0.12%ï¼Œä½æ¶ˆ12ç¾é‡‘)\næµ·å¤–è¤‡å§”è¨—è‹±è‚¡(å¯Œé‚¦è­‰åˆ¸ï¼Œ0.15%ï¼Œä½æ¶ˆ15ç¾é‡‘)\næµ·å¤–åˆ¸å•†(é›»åŒ¯è²»ç”¨ä¸€æ¬¡800å§(ä¸ç¢ºå®šæ²’ç”¨é)ï¼Œäº¤æ˜“æ‰‹çºŒè²»è¶¨è¿‘æ–¼0)\né‡‘é¡å¤§çš„è©±æµ·å¤–åˆ¸å•†æ¯”è¤‡å§”è¨—é‚„è¦çœå¾ˆå¤šï¼Œä¸éæˆ‘è‡ªå·±éŒ¢é‚„æ²’æœ‰é‚£éº¼å¤šï¼Œç¾åœ¨éšæ®µç”¨å¾©å§”è¨—æœƒæ¯”è¼ƒä¾¿å®œä¸€é»ã€‚\n æŠ•è³‡æ¨™çš„  ä¼¯æ ¼é ­çš„æŠ•è³‡æŒ‡å—ç¬¬4æ¢ï¼ŒDiversifyï¼Œå¤šæ¨£æ€§ã€‚\nETFä¸€ç±ƒå­çš„è‚¡ç¥¨ï¼Œå«æœ‰å„å€‹é ˜åŸŸèˆ‡ä¸åŒå…¬å¸çš„è‚¡ç¥¨\nä¼¯æ ¼é ­çš„æŠ•è³‡æŒ‡å—ç¬¬6æ¢ï¼ŒUse index funds when possibleï¼Œå¦‚æœå¯èƒ½çš„è©±ä½¿ç”¨æŒ‡æ•¸åŸºé‡‘ã€‚\n006208 å¯ä»¥æŠŠå®ƒæƒ³æˆå…§æ‰£è²»ç”¨è¼ƒä½çš„0050\nä¼¯æ ¼é ­çš„æŠ•è³‡æŒ‡å—ç¬¬8æ¢ï¼ŒMinimize taxesï¼Œä¸Šç­æ—ç¹³å¤ªå¤šç¨…äº†ï¼Œå°‘ç¹³ä¸€é»ã€‚\nVWRD å¯ä»¥æŠŠå®ƒæƒ³æˆè‹±åœ‹ç‰ˆçš„VTï¼Œä½†å°‘äº†å°å‹è‚¡éƒ¨ä½ï¼Œç¨…ä¹Ÿæ¯”è¼ƒå°‘äº†ã€‚\n æŠ•è³‡çµ„åˆ  ä¼¯æ ¼é ­çš„æŠ•è³‡æŒ‡å—ç¬¬9æ¢ï¼ŒInvest with simplicityï¼Œç°¡å–®æ‰å¥½ç®¡ç†ã€‚\nç”±æ–¼ä½¿ç”¨å¾©å§”è¨—ï¼Œæ¨™çš„å¤ªå¤šäº¤æ˜“æˆæœ¬æœƒå¤ªé«˜ï¼Œæ‰€ä»¥æˆ‘æ˜¯æ²’æœ‰é…å‚µçš„éƒ¨ä½ï¼Œå…ˆç”¨é«˜åˆ©ç‡æ´»å­˜ä¾†ä»£æ›¿ï¼Œæœªä¾†åœ¨è€ƒæ…®è¦ä¸è¦åŠ å…¥å‚µåˆ¸éƒ¨ä½ã€‚\nè‚¡ç¥¨éƒ¨ä½ï¼šVWRD 80%ã€006208 20%\n æŠ•å…¥æ™‚é–“  ä¼¯æ ¼é ­çš„æŠ•è³‡æŒ‡å—ç¬¬5æ¢ï¼ŒNever try to time the marketï¼ŒéŒ¢å¤ å°±ä¸Ÿï¼Œæˆ‘å°±çœ‹ä»–èƒ½ä¸èƒ½é•·å‡ºä¸€æœµèŠ±ã€‚\næŒæœ‰è¶Šä¹…çš„ç¾é‡‘æ©Ÿæœƒæˆæœ¬è¶Šå¤§ï¼Œæ‡‰è©²å„˜æ—©æŠ•å…¥ã€‚\nVWRDæ¯3~4å€‹æœˆæ‰‹å‹•æ“ä½œè²·å…¥\n006208å®šæœŸå®šé¡è²·å…¥\n æœªä¾†  è–ªæ°´é«˜ï¼Œç´¯ç©è²¡å¯Œçš„é€Ÿåº¦ä¹Ÿæ‰æœƒå¿«ï¼Œå°ˆæ³¨æ–¼æœ¬æ¥­ï¼Œæå‡è‡ªå·±çš„èƒ½åŠ›èˆ‡åƒ¹å€¼ã€‚\nä¼¯æ ¼é ­çš„æŠ•è³‡æŒ‡å—ç¬¬10æ¢ï¼ŒStay the courseï¼ŒæŒä¹‹ä»¥æ†ã€‚\nä¸€ç›´å …æŒä¸‹å»å°±å°äº†ï¼Œå¦‚æœå¿ƒä¸­æœ‰æ‰€ç–‘æƒ‘ï¼Œé‚£å¯èƒ½æ˜¯æŠ•è³‡çµ„åˆä¸é©åˆè‡ªå·±ï¼Œè¦å†åšèª¿æ•´ã€‚\n\r\n","date":"2021-12-06T10:55:10+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/20211206_%E6%8C%87%E6%95%B8%E6%8A%95%E8%B3%87.md/","title":"æŒ‡æ•¸æŠ•è³‡"},{"content":" ä»‹ç´¹  æ¥ä¸‹ä¾†çš„ç­†è¨˜æ˜¯æ ¹æ“šç·šä¸Šèª²ç¨‹Microservices Architecture and Implementation on .NET 5æ‰€è¨˜éŒ„ä¸‹ä¾†çš„ï¼Œè¬›è€…çš„å£éŸ³æœ‰é»é‡ï¼Œè½å¾—æœ‰é»åƒåŠ›ï¼Œä»–é€™å€‹å°ˆæ¡ˆåŸºæœ¬ä¸Šé‡åšå¾®è»Ÿæä¾›çš„ç¯„ä¾‹å°ˆæ¡ˆï¼Œé›»å•†ç³»çµ±ï¼Œå®Œç¾å‘ˆç¾å¾®æœå‹™çš„ä½¿ç”¨èˆ‡ä»–çš„å„ªé»ï¼Œä¸€å…±æŠŠæœå‹™åˆ‡æˆå››å€‹ä¸»è¦çš„æœå‹™ï¼ŒCatalog(å•†å“ç›®éŒ„ç³»çµ±)ã€Basket(è³¼ç‰©è»Šç³»çµ±)ã€Discount(æŠ˜æ‰£ç³»çµ±)ã€Ordering(è¨‚å–®ç³»çµ±)ï¼Œä¸¦åˆ†åˆ¥ä½¿ç”¨ä¸åŒçš„è³‡æ–™åº«(mongodbã€redisã€PostgreSQLã€MSSQL)ã€ä¸åŒçš„å‚³è¼¸å”å®š(Rest APIã€Grpc)ã€ä¸åŒçš„æ¶æ§‹(å¤šå±¤å¼æ¶æ§‹ã€ç°¡æ½”æ¶æ§‹)ï¼Œæœ€å¾Œä½¿ç”¨Dockerå®¹å™¨åŒ–ï¼ŒæŠŠä»–å€‘éƒ½æ•´åˆåœ¨ä¸€èµ·é‹ä½œã€‚\n\ræ•´å€‹ç³»çµ±çš„æ¶æ§‹åœ–\r\nå·¥ä½œä¸€é™£å­äº†ï¼Œç¶­è­·çš„ç³»çµ±åŸºæœ¬ä¹Ÿéƒ½ä¸Šæ‰‹äº†(é¾å¤§çš„Web Serviceæ¶æ§‹)ï¼Œä½†é‚„æœ‰è¨±å¤šå‰äººçš„æ™ºæ…§ï¼Œä¸€æ™‚ä¹‹é–“æ˜¯å¾ˆé›£ç†è§£çš„XDï¼Œé€™æ™‚æœ‰ä¸€å€‹ä¹¾æ·¨çš„æ¶æ§‹ï¼Œæˆ–è¨±ä¸Šæ‰‹çš„æ™‚é–“å°±å¯ä»¥æ›´çŸ­äº†ã€‚\n Domain Layer  å»ºç«‹ä¸€å€‹è¨‚å–®ç³»çµ±ä½¿ç”¨Clean Architecture\nä¾ç…§åˆ†å±¤å‰µå»ºå„å€‹ä¸åŒçš„Projectï¼Œ Ordering.API Ordering.Domain Ordering.Application Ordering.infrastructure \ræ•´å€‹ç³»çµ±çš„æ¶æ§‹åœ–\r\nå»ºç«‹ç›¸ä¾é—œä¿‚Projectå³éµ \u0026gt;\u0026gt; Add \u0026gt;\u0026gt; Reference \rç›¸ä¾é—œä¿‚\r\nè©³ç´°å®šç¾©èˆ‡è¨­è¨ˆå¯ä»¥åƒè€ƒ\nhttps://ithelp.ithome.com.tw/articles/10223150 https://ithelp.ithome.com.tw/articles/10223595\n é–‹ç™¼Ordering.Domain Layer  æˆ‘å€‘è¦å…ˆå»ºç«‹å…©å€‹è³‡æ–™å¤¾Commonã€Entities\nCommon å…¶ä¸­Commonæ”¾çš„æ˜¯æˆ‘å€‘å»ºç«‹Entityçš„åŸºç¤ï¼Œå«æœ‰å…©å€‹abstract classï¼ŒEntityBaseã€ValueObjectï¼Œ\n//æˆ‘å€‘æ¯ä¸€å€‹Entityéƒ½è¦çš„å±¬æ€§ public abstract class EntityBase { public int Id { get; protected set; } public string CreatedBy { get; set; } public DateTime CreatedDate { get; set; } public string LastModifiedBy { get; set; } public DateTime? LastModifiedDate { get; set; } } Entities å»ºç«‹Orderç‰©ä»¶ä¸¦ç¹¼æ‰¿EntityBase\n//è¨‚å–®å¿…é ˆè¦çš„å±¬æ€§ public class Order : EntityBase { public string UserName { get; set; } public decimal TotalPrice { get; set; } // BillingAddress  public string FirstName { get; set; } public string LastName { get; set; } public string EmailAddress { get; set; } public string AddressLine { get; set; } public string Country { get; set; } public string State { get; set; } public string ZipCode { get; set; } // Payment  public string CardName { get; set; } public string CardNumber { get; set; } public string Expiration { get; set; } public string CVV { get; set; } public int PaymentMethod { get; set; } }  åƒè€ƒ  ç°¡æ½”æ¶æ§‹ Application Layer\nç°¡æ½”æ¶æ§‹ Infrastructure Layer\nhttps://www.udemy.com/course/microservices-architecture-and-implementation-on-dotnet/\nhttps://rwang.medium.com/%E5%86%8D%E8%AE%80%E6%95%B4%E6%BD%94%E6%9E%B6%E6%A7%8B-clean-architecture-12b562472c3b\n","date":"2021-12-02T15:52:49+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/2021202_%E7%B0%A1%E6%BD%94%E6%9E%B6%E6%A7%8Bdomain.md/","title":"ç°¡æ½”æ¶æ§‹ Domain Layer"},{"content":" ç­†è¨˜  CQRS(Command Query Responsibility Segregation)å‘½ä»¤æŸ¥è©¢åˆ†éš”ï¼Œç›®å‰çœ‹èµ·ä¾†å°±æ˜¯ä¸å†éœ€è¦IRepositoryäº†ï¼ŒæŠŠå®ƒæ‹†æˆCommand(è² è²¬å¯«å…¥è³‡æ–™åº«çš„éƒ¨åˆ†)èˆ‡Query(åªè² è²¬è®€å–çš„éƒ¨åˆ†)ã€‚\nå¯ä»¥å¢åŠ è³‡æ–™åº«çš„æ•ˆèƒ½ï¼ŒCommandçš„éƒ¨åˆ†å‰‡æœƒé€éeventçš„å½¢å¼è¨˜éŒ„èµ·ä¾†å†åŒæ­¥åˆ°DBä¸Šé¢ã€‚\næˆ‘é‚„æ˜¯åå¥½åŸæœ¬çš„æ–¹æ³•å•ŠXD\n åƒè€ƒ  https://ithelp.ithome.com.tw/articles/10237458\n","date":"2021-12-01T11:08:44+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/2021201_cqrs.md/","title":"CQRS"},{"content":" é—œæ–¼DDD  éš¨è‘—ç§‘æŠ€é€²æ­¥ï¼Œéœ€æ±‚ä¹Ÿæ˜¯è¶Šä¾†è¶Šè¤‡é›œï¼Œæ›´å¤šçš„æ˜¯éœ€è¦å°ˆæ¥­é ˜åŸŸäººå“¡èˆ‡é–‹ç™¼äººå“¡å…±åŒå”ä½œ\nDDDæ˜¯ä¸€ç¨®åŸºæ–¼é ˜åŸŸçŸ¥è­˜ä¾†è§£æ±ºè¤‡é›œæ¥­å‹™å•é¡Œçš„è»Ÿé«”é–‹ç™¼æ–¹æ³•è«–ã€‚\n Ubiquitous Language  ä½¿ç”¨é€šç”¨èªè¨€å°±å¾ˆé‡è¦äº†ï¼Œè¬›äººè©±ï¼Œæ¸›å°‘æºé€šæˆæœ¬ã€‚ ex:ä¸‹è¨‚å–®å¤§å®¶å°±è½å¾—æ‡‚ï¼Œåˆ¥è¬›äº›ä»€éº¼call Order APIã€B2Cä¹‹é¡çš„\n Anemic Model  Anemic Modelè²§è¡€æ¨¡å‹æ˜¯æŒ‡é‚£äº›åªæœ‰getterã€setteræ²’æœ‰è¡Œç‚ºèƒ½åŠ›çš„æ¨¡å‹\nLF2é‚ªé¬¼(åœ°ç„ç«ç„°)é˜²ä¸‹åŠŸ+é˜²ä¸Šè·³+é˜²å‰è·³+é˜²ä¸‹è·³+é˜²ä¸ŠåŠŸ ç‚ºä¾‹\nDevil Max = new Devil(); //ä½¿ç”¨åœ°ç„ç«ç„° Max.Defence().Down().Attack(); Max.Defence().Up().Jump(); Max.Defence().Left().Jump(); Max.Defence().Down().Jump(); Max.Defence().Up().Attack(); å°å…¥DDDèˆ‡å°ˆå®¶è¨è«–éå¾Œï¼Œæœªä¾†é–‹ç™¼çš„äººå“¡ç›´æ¥çœ‹ç¨‹å¼ç¢¼ä¹Ÿçœ‹å¾—æ‡‚åœ¨å¹¹å˜›\nDevil Max = new Devil(); Max.HellFire();  èˆ‡å¾®æœå‹™çš„é—œä¿‚  å¾ˆå¤šæ™‚å€™Micorservicesä¸çŸ¥é“æ€éº¼åšåˆ‡å‰²ï¼Œé€™æ™‚å€™DDDå°±æä¾›ä¸€å€‹å¾ˆå¥½çš„æ–¹å‘å»åšæ¥­å‹™åˆ†å‰²ã€‚\n åƒè€ƒ  https://ithelp.ithome.com.tw/articles/10216645 https://forum.gamer.com.tw/C.php?bsn=7648\u0026snA=3299\n","date":"2021-11-30T14:30:40+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/2021130_ddd.md/","title":"Domain Driven Design é ˜åŸŸé©…å‹•è¨­è¨ˆ"},{"content":" SOLIDåŸå‰‡  Single responsibility principle å–®ä¸€åŠŸèƒ½åŸå‰‡ èªç‚ºä¸€å€‹classå°±æ‡‰è©²åªæœ‰ä¸€å€‹ä»»å‹™è¦åšï¼Œä¸åšå…¶ä»–ä»»å‹™ä»¥å¤–çš„äº‹æƒ…ï¼Œéå»æ˜¯å¾ˆå¤šä¸åŒçš„éœ€æ±‚éƒ½ç”¨åŒä¸€å€‹Serviceï¼Œå–®ä¸€åŠŸèƒ½åŸå‰‡å‰‡æ˜¯æä¾›å„ç¨®ä¸åŒçš„Use Caseçµ¦å„å€‹éœ€æ±‚ã€‚ \rSRPç¤ºæ„åœ–\r\nOpen/ closed principle é–‹é–‰åŸå‰‡ ä¸€å€‹classæˆ–Functionå°æ–¼ä»–çš„æ“´å±•æ˜¯é–‹æ”¾çš„ï¼Œä½†æ˜¯å°æ–¼ä¿®æ”¹æ˜¯å°é–‰çš„ï¼Œæ„æ€å°±æ˜¯ä¸æ”¹è®Šä»–çš„è¡Œç‚ºï¼Œä½†æ˜¯å¯ä»¥å¢åŠ æ–°çš„åŠŸèƒ½ã€‚ å°±åƒæ˜¯é›»å‹•ç†é«®åˆ€ï¼Œå¯ä»¥æ›ä¸Šå„ç¨®ä¸åŒçš„åˆ€é ­(æ“´å±•)ï¼Œä½†æ˜¯æ©Ÿèº«æœ¬é«”æ˜¯ä¸èƒ½ä¿®æ”¹çš„(å°é–‰)ã€‚\nLiskov substitution principle é‡Œæ°æ›¿æ›åŸå‰‡ ç¨‹å¼ä¸­çš„ç‰©ä»¶æ‡‰è©²æ˜¯å¯ä»¥åœ¨ä¸æ”¹è®Šæ­£ç¢ºæ€§çš„å‰æä¸‹è¢«ä»–çš„å­é¡æ‰€æ›¿æ›çš„æ¦‚å¿µï¼Œæˆ‘å€‘åœ¨ä½¿ç”¨ã€Œç¹¼æ‰¿ã€æ™‚ï¼Œé‡è¦çš„æ˜¯é‡è¤‡ä½¿ç”¨ (reuse) å·²ç¶“å¯«å¥½çš„è¡Œç‚ºï¼Œè€Œä¸æ˜¯å°‡æ‰€æœ‰ç¹¼æ‰¿çš„è¡Œç‚ºå…¨éƒ¨è¦†è“‹ã€‚\nInterface segregation principle ä»‹é¢éš”é›¢åŸå‰‡ å¾ˆå¤šå€‹å®¢è£½åŒ–çš„interfaceæ¯”ä¸€å€‹é€šç”¨çš„interfaceé‚„è¦ä¾†å¾—æ›´å¥½ç®¡ç†ï¼Œä¾‹å¦‚ä¸€å€‹æ”¿å®¢interfaceæœ‰æå‡ºæ”¿è¦‹()ã€æ‹œç¥¨()ã€åŠªåŠ›å·¥ä½œ()ï¼Œä½†äº‹å¯¦ä¸Šä¸æ˜¯æ¯ä¸€å€‹æ”¿å®¢éƒ½æƒ³å¯¦ä½œåŠªåŠ›å·¥ä½œXDï¼Œæ‰€ä»¥æ‡‰è©²æ–¹åˆ¥å»ºå…©å€‹interfaceï¼Œæ”¿å®¢ä»‹é¢:æå‡ºæ”¿è¦‹()ã€æ‹œç¥¨()èˆ‡å·¥ä½œä»‹é¢:åŠªåŠ›å·¥ä½œ()ã€‚\nDependency inversion principle ä¾è³´åè½‰åŸå‰‡ å„å€‹classä¹‹é–“çš„ç›¸ä¾æ€§æ‡‰è©²è¶Šä½è¶Šå¥½ï¼Œä¸Šå±¤çš„classä¸è©²ä¾è³´ä¸‹å±¤çš„class \rDIPç¤ºæ„åœ–\r\n SoC(Separation of concerns) é—œæ³¨é»åˆ†é›¢  é—œæ³¨é»åˆ†é›¢è¡¨ç¤ºï¼Œä»¥å‰ç«¯çš„ä¾‹å­ä¾†èªªï¼Œåœ¨éå»æˆ‘å€‘æ˜¯ä»¥ã€Œé—œæ³¨æŠ€è¡“ã€çš„æ–¹å¼ä¾†åˆ†é›¢æˆHTMLã€CSSã€JavaScriptï¼Œç¾ä»Šä¸»æµæ¡†æ¶Vueå‰‡æ˜¯æ¡ç”¨ã€Œé—œæ³¨å…ƒä»¶ã€çš„æ–¹å¼ä¾†åˆ†é›¢ï¼Œæ¯ä¸€å€‹Componentéƒ½æœ‰å„è‡ªçš„HTMLã€CSSã€JavaScriptã€‚\n åƒè€ƒ  https://zh.wikipedia.org/wiki/SOLID_(%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1) https://medium.com/@f40507777/%E9%96%8B%E6%94%BE%E5%B0%81%E9%96%89%E5%8E%9F%E5%89%87-open-closed-principle-31d61f9d37a5 https://medium.com/%E6%89%8B%E5%AF%AB%E7%AD%86%E8%A8%98/%E7%AC%AC-10-%E7%AB%A0-%E9%A1%9E%E5%88%A5-clean-code-1c7898d11cd7\n","date":"2021-11-29T16:10:40+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/2021129_solid%E5%8E%9F%E5%89%87.md/","title":"SOLIDã€SoC"},{"content":" ç­†è¨˜  å¯ä»¥è¼•é¬†çš„è½‰æ›å…©å€‹classï¼Œè®“ç¨‹å¼ç¢¼è®Šå¾—æ›´åŠ ç°¡çŸ­ä¹¾æ·¨ã€‚\nmessage CouponModel { int32 id = 1; string productName = 2; string description = 3; int32 amount = 4; } åœ¨Grpcå®šç¾©çš„å„ªæˆ¶åˆ¸æ¨¡å‹\npublic class Coupon { public int Id { get; set; } public string ProductName { get; set; } public string Description { get; set; } public int Amount { get; set; } } æˆ‘å€‘è‡ªå·±å®šç¾©çš„æ¨¡å‹\nåŸå…ˆè½‰æ›éœ€è¦åƒæ˜¯é€™å€‹æ¨£å­\nCoupon coupon; CouponModel cm = new CouponModel{ id = coupon.Id, productName = coupon.ProductName, description = coupon.Description, amount = coupon.Amount } ä½¿ç”¨Mapperå¾Œåªè¦\nCoupon coupon; CouponModel cm = _mapper.Map\u0026lt;CouponModel\u0026gt;(coupon);  å¦‚ä½•ä½¿ç”¨  1.Nugetæœå°‹ä¸¦ä¸‹è¼‰AutoMapper.Extensions.Microsoft.DependencyInjection\n2.åœ¨Startupè¨»å†ŠAutoMapperæœå‹™\npublic void ConfigureServices(IServiceCollection services) { services.AddAutoMapper(typeof(Startup)); } 3.å»ºç«‹è½‰æ›çš„Porfile\npublic class CouponProfile :Profile //ç¹¼æ‰¿Profile { public CouponProfile() { //è®“Couponèˆ‡CouponModelå¯ä»¥æ–¹ä¾¿åœ°äº’ç›¸è½‰æ›  CreateMap\u0026lt;Coupon, CouponModel\u0026gt;().ReverseMap(); } } 4.ä¾è³´æ³¨å…¥åˆ°éœ€è¦ä½¿ç”¨çš„classè£¡\nprivate readonly IMapper _mapper; public DiscountService(IMapper mapper) { _mapper = mapper; } 5.äº«å—AutoMapperå¸¶ä¾†çš„ä¾¿åˆ©~~\n åƒè€ƒ  https://igouist.github.io/post/2020/07/automapper/\n","date":"2021-11-25T14:55:07+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/20211125_automapper.md/","title":"AutoMapper - DI Version"},{"content":" ç­†è¨˜  Grpcæ˜¯googleé–‹ç™¼çš„rpc(Remote Procedure Call)æ¡†æ¶ï¼Œç”¨æ–¼é›»è…¦èˆ‡é›»è…¦ä¹‹é–“çš„æºé€šï¼Œå°±åƒé›»è…¦Aå‘¼å«é›»è…¦Båšäº‹æƒ…ï¼Œé›»è…¦Båšå¥½äº‹æƒ…å¾ŒæŠŠçµæœå›å‚³çµ¦é›»è…¦Aï¼Œèˆ‡ä¸€èˆ¬çš„apiä¸åŒçš„åœ°æ–¹åœ¨æ–¼ï¼Œé›»è…¦Aã€Båœ¨é€²è¡ŒGrpcæºé€šå‰ï¼Œéƒ½å¿…é ˆæœ‰protocal buffersæª”æ¡ˆä¾†æŠŠæ ¼å¼èˆ‡æ–¹æ³•å®šç¾©æ¸…æ¥šï¼Œä¸¦ä½¿ç”¨HTTP/2é€²è¡Œå‚³è¼¸ï¼Œå¿«é€Ÿã€ä½å»¶é²ã€æ”¯æŒä¸²æµã€‚\n protocal buffers æª”æ¡ˆ  åœ¨VSè£¡é¢ï¼ŒAdd \u0026raquo; New Project \u0026raquo; é¸gRPC Service \u0026raquo; \u0026hellip;ä¸€äº›åŸºæœ¬è¨­å®š\nç”Ÿæˆæ–°gRPC Serviceå¾Œï¼Œè£¡é¢æœƒæœ‰.protoæª”æ¡ˆ\nsyntax = \u0026#34;proto3\u0026#34;;//ä½¿ç”¨çš„protocal buffersç‰ˆæœ¬  option csharp_namespace = \u0026#34;MyFirstGrpc.Grpc\u0026#34;;//å‘½åç©ºé–“  package greeter; // å®šç¾©äº¤æ›è³‡æ–™çš„æ ¼å¼ message HelloRequest { string name = 1; } // å®šç¾©äº¤æ›è³‡æ–™çš„æ ¼å¼ message HelloReply { string message = 1; } // å®šç¾©å‘¼å«apiçš„æ–¹æ³• service Greeter { // SayHelloæ–¹æ³•éœ€è¦è¼¸å…¥åƒæ•¸(HelloRequestæ ¼å¼) æœƒå›å‚³(HelloReplyæ ¼å¼)  rpc SayHello (HelloRequest) returns (HelloReply); }  AppSettings ä½¿ç”¨Http2  { \u0026#34;Logging\u0026#34;: { \u0026#34;LogLevel\u0026#34;: { \u0026#34;Default\u0026#34;: \u0026#34;Information\u0026#34;, \u0026#34;Microsoft\u0026#34;: \u0026#34;Warning\u0026#34;, \u0026#34;Microsoft.Hosting.Lifetime\u0026#34;: \u0026#34;Information\u0026#34; } }, \u0026#34;AllowedHosts\u0026#34;: \u0026#34;*\u0026#34;, \u0026#34;Kestrel\u0026#34;: { \u0026#34;EndpointDefaults\u0026#34;: { \u0026#34;Protocols\u0026#34;: \u0026#34;Http2\u0026#34; } } } æˆ‘å€‘å¯ä»¥çœ‹åˆ°åœ¨AppSettingsè£¡Protocolsæ˜¯æ¡ç”¨Http2\n ç”¢ç”ŸService classæª”æ¡ˆ  å¦‚æœè¨­å®šéƒ½æ²’æœ‰éŒ¯çš„è©±ï¼Œæœƒåœ¨MyFirstGrpc.Grpc/obj/Debug/net5.0/Protosç”¢ç”ŸGreet.csèˆ‡GreetGrpc.cs\nè‹¥è³‡æ–™å¤¾å…§æ²’æœ‰ç”¢ç”Ÿcsæª”ï¼Œå¾ˆæœ‰å¯èƒ½æ˜¯å°ˆæ¡ˆæª”MyFirstGrpc.Grpc.csprojè£¡é¢è¨­å®šæœ‰å•é¡Œã€‚\nç¢ºä¿æœ‰\u0026lt;Protobuf Include=\u0026quot;Protos\\greet.proto\u0026quot; GrpcServices=\u0026quot;Server\u0026quot; /\u0026gt;å°.protoåšç·¨è­¯\n//åƒè€ƒçš„.csproj \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;Project Sdk=\u0026#34;Microsoft.NET.Sdk.Web\u0026#34;\u0026gt; \u0026lt;PropertyGroup\u0026gt; \u0026lt;TargetFramework\u0026gt;net5.0\u0026lt;/TargetFramework\u0026gt; \u0026lt;/PropertyGroup\u0026gt; \u0026lt;ItemGroup\u0026gt; \u0026lt;None Remove=\u0026#34;Protos\\greeter.proto\u0026#34; /\u0026gt; \u0026lt;/ItemGroup\u0026gt; \u0026lt;ItemGroup\u0026gt; \u0026lt;PackageReference Include=\u0026#34;Grpc.AspNetCore\u0026#34; Version=\u0026#34;2.32.0\u0026#34; /\u0026gt; \u0026lt;/ItemGroup\u0026gt; \u0026lt;ItemGroup\u0026gt; \u0026lt;Protobuf Include=\u0026#34;Protos\\greeter.proto\u0026#34; GrpcServices=\u0026#34;Server\u0026#34; /\u0026gt; \u0026lt;/ItemGroup\u0026gt; \u0026lt;/Project\u0026gt;  GreeterService å¯¦ä½œ  namespace MyFirstGrpc.Grpc { public class GreeterService : Greeter.GreeterBase { private readonly ILogger\u0026lt;GreeterService\u0026gt; _logger; public GreeterService(ILogger\u0026lt;GreeterService\u0026gt; logger) { _logger = logger; } public override Task\u0026lt;HelloReply\u0026gt; SayHello(HelloRequest request, ServerCallContext context) { return Task.FromResult(new HelloReply { Message = $\u0026#34;Hello {request.Name}\u0026#34; }); } } } åœ¨Services/GreeterService.csä¸‹\nç¹¼æ‰¿è‡ªå‹•ç”¢ç”Ÿçš„Greeterä¸‹çš„GreeterBaseä¸¦å°‡å…¶è¦†å¯«ï¼Œæœ€ä¸»è¦çš„é‚è¼¯ä¹Ÿæ˜¯å¯«åœ¨é€™é‚Šã€‚\nSayHelloæ–¹æ³•éœ€è¦è¼¸å…¥åƒæ•¸(HelloRequestæ ¼å¼) æœƒå›å‚³(HelloReplyæ ¼å¼)\nTip:è¼¸å…¥overrideæŒ‰ä¸‹ç©ºç™½ï¼ŒVSæœƒè‡ªå‹•æŠŠå¯ä»¥overrideçš„classé¡¯ç¤ºå‡ºä¾†ã€‚\n è¨»å†ŠGrpcæœå‹™  public class Startup { public void ConfigureServices(IServiceCollection services) { services.AddGrpc(); } public void Configure(IApplicationBuilder app, IWebHostEnvironment env) { if (env.IsDevelopment()) { app.UseDeveloperExceptionPage(); } app.UseRouting(); app.UseEndpoints(endpoints =\u0026gt; { endpoints.MapGrpcService\u0026lt;GreeterService\u0026gt;(); endpoints.MapGet(\u0026#34;/\u0026#34;, async context =\u0026gt; { await context.Response.WriteAsync(\u0026#34;Communication with gRPC endpoints must be made through a gRPC client. To learn how to create a client, visit: https://go.microsoft.com/fwlink/?linkid=2086909\u0026#34;); }); }); } } åœ¨startup.csä¸‹ é€éservices.AddGrpc();è¨»å†ŠGrpcæœå‹™ï¼Œæ–¹å¯ä½¿ç”¨Grpcã€‚ é€éendpoints.MapGrpcService\u0026lt;GreeterService\u0026gt;();æŠŠæ‰€æœ‰Grpcæœå‹™éƒ¨ç½²åˆ°Routing Pipelineè£¡\n æ–°å¢Grpcæœå‹™çš„reference  è³¼ç‰©è»Šçš„åŠŸèƒ½éœ€è¦å°å…¥æŠ˜åƒ¹åˆ¸.Grpcçš„æœå‹™\nè³¼ç‰©è»Šæ˜¯Clientç«¯\næŠ˜åƒ¹åˆ¸æ˜¯Serverç«¯\nVS for Macåœ¨å°ˆæ¡ˆä¸‹é¢å°±å¯ä»¥ç›´æ¥çœ‹åˆ°Connected Services Windowså‰‡æ˜¯å³éµ \u0026raquo; Add \u0026raquo; connected services\né¸å–è³¼ç‰©è»Šå°ˆæ¡ˆçš„connected services \u0026raquo; Add new Grpc service reference \u0026raquo; Add \u0026raquo; åƒç…§æŠ˜åƒ¹åˆ¸.Grpcè£¡é¢çš„.proto \u0026raquo; é¸æ“‡Clientæ¨¡å¼\nåŸ·è¡Œå®Œå¾Œï¼Œå¯ä»¥çœ‹åˆ°.csprojå¤šäº†Grpcæœå‹™ã€å°ˆæ¡ˆä¸‹ä¹Ÿå¤šäº†protos\n\u0026lt;Protobuf Include=\u0026#34;..\\..\\Discount\\Discount.Grpc\\Discount.Grpc\\Protos\\discount.proto\u0026#34; GrpcServices=\u0026#34;Client\u0026#34;\u0026gt; \u0026lt;OutputDir\u0026gt;obj\\Debug\\net5.0\\\u0026lt;/OutputDir\u0026gt; \u0026lt;Link\u0026gt;Protos\\discount.proto\u0026lt;/Link\u0026gt; \u0026lt;/Protobuf\u0026gt; å»ºç½®å°ˆæ¡ˆå¾Œï¼Œä¹Ÿæœƒç”¢ç”ŸProtoServiceClientç­‰csæª”\n åƒè€ƒ  https://pjchender.dev/golang/grpc-getting-started/\nhttps://docs.microsoft.com/en-us/aspnet/core/grpc/aspnetcore?view=aspnetcore-6.0\u0026tabs=visual-studio\n","date":"2021-11-24T10:12:35+08:00","permalink":"https://mindbreaker3310.github.io/posts/post/20211124_grpcmemo.md/","title":"Grpc ç­†è¨˜"}]